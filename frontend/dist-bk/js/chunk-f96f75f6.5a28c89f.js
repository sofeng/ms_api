(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f96f75f6"],{"0ac8":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.tableActive?o("div",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableIsLoading,expression:"tableIsLoading"}],ref:"table",staticClass:"test-content adjust-table ms-table",class:{"ms-select-all-fixed":e.showSelectAll},attrs:{border:"",data:e.data,height:e.screenHeight},on:{"sort-change":e.sort,"filter-change":e.filter,"select-all":e.handleSelectAll,select:e.handleSelect,"header-dragend":e.headerDragend,"cell-mouse-enter":e.showPopover,"row-click":e.handleRowClick}},[e.enableSelection?o("el-table-column",{attrs:{width:"50",type:"selection"}}):e._e(),e.enableSelection&&e.showSelectAll?o("ms-table-header-select-popover",{ref:"selectPopover",attrs:{"page-size":e.pageSize>e.total?e.total:e.pageSize,"table-data-count-in-page":e.data.length,total:e.total},on:{selectPageAll:function(t){return e.isSelectDataAll(!1)},selectAll:function(t){return e.isSelectDataAll(!0)}}}):e._e(),e.enableSelection&&e.batchOperators&&e.batchOperators.length>0?o("el-table-column",{attrs:{width:"30",fixed:"left",resizable:!1,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("show-more-btn",{attrs:{"has-showed":e.hasBatchTipShow,"is-show":t.row.showMore,buttons:e.batchOperators,size:e.selectDataCounts}})]}}],null,!1,28011497)}):e._e(),o("el-table-column",{attrs:{width:"1"},scopedSlots:e._u([{key:"header",fn:function(){return[o("span",{staticClass:"table-column-mark"},[e._v("Â ")])]},proxy:!0}],null,!1,264163202)}),e._t("default"),e.operators&&e.operators.length>0?o("el-table-column",{attrs:{"min-width":e.operatorWidth,fixed:"right",label:e.$t("commons.operating")},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._t("opt-before",null,{row:t.row}),o("ms-table-operators",{attrs:{buttons:e.operators,row:t.row,index:t.$index}}),e._t("opt-behind",null,{row:t.row})],2)]}}],null,!0)},[o("template",{slot:"header"},[e.fieldKey?o("header-label-operate",{on:{exec:e.openCustomHeader}}):e._e()],1)],2):e._e()],2),e.fieldKey?o("ms-custom-table-header",{ref:"customTableHeader",attrs:{type:e.fieldKey,"custom-fields":e.customFields},on:{reload:e.resetHeader}}):e._e()],1):e._e()},n=[],i=(o("89a8"),o("d25d"),o("b110"),o("fe35"),o("51b3"),o("8ea3"),o("e766"),o("e077")),l=o("665c"),a=o("4abd"),r=o("59d9"),c=o("eab7"),u=o("625a"),d=o("1763"),h=o("aa2a"),f=o("6191"),p=o("e5fd"),b={name:"MsTable",components:{MsCustomTableHeader:p["a"],HeaderLabelOperate:h["a"],MsTableOperators:d["a"],MsTableColumn:u["a"],ShowMoreBtn:c["a"],MsTablePagination:r["a"],MsTableHeaderSelectPopover:l["a"],HeaderCustom:f["a"]},data:function(){return{selectDataCounts:0,selectRows:new Set,selectIds:[],tableActive:!0,hasBatchTipShow:!1}},props:{screenHeight:{type:[String,Number],default:400},selectNodeIds:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},condition:{type:Object,default:function(){return{}}},pageSize:{type:Number,default:function(){return 10}},total:{type:Number,default:function(){return 10}},operators:{type:Array,default:function(){return[]}},batchOperators:{type:Array,default:function(){return[]}},operatorWidth:{type:String,default:function(){return"150px"}},enableSelection:{type:Boolean,default:function(){return!0}},showSelectAll:{type:Boolean,default:function(){return!0}},tableIsLoading:{type:Boolean,default:function(){return!1}},fields:Array,fieldKey:String,customFields:Array},mounted:function(){Object(i["q"])(this,a["E"])},watch:{selectNodeIds:function(){this.selectDataCounts=0}},methods:{removeBatchPopper:function(){for(var e=this,t=window.document.getElementsByClassName("batch-popper"),o=window.document.getElementsByClassName("table-column-mark"),s=window.document.getElementsByClassName("table-more-icon"),n=o[0].getBoundingClientRect().top,i=0,l=0;l<s.length;l++){var a=s[l];if(this.isScrollShow(a,n)){i=l;break}}if(t)for(var r=0;r<t.length;r++)r==i&&(t[r].classList.remove("batch-popper"),setTimeout((function(){e.hasBatchTipShow=!0}),1500))},isScrollShow:function(e,t){var o=e.getBoundingClientRect().top;return o-t>30},handleSelectAll:function(e){Object(i["c"])(this,e,this.data,this.selectRows,this.condition),Object(i["A"])(this.data,this.condition,this.selectRows),this.selectDataCounts=Object(i["u"])(this.condition,this.total,this.selectRows),this.selectIds=Array.from(this.selectRows).map((function(e){return e.id})),this.$emit("callBackSelectAll",e),this.$nextTick((function(){setTimeout(this.removeBatchPopper,1)}))},handleSelect:function(e,t){Object(i["b"])(this,e,t,this.selectRows),Object(i["A"])(this.data,this.condition,this.selectRows),this.selectDataCounts=Object(i["u"])(this.condition,this.total,this.selectRows),this.selectIds=Array.from(this.selectRows).map((function(e){return e.id})),this.$emit("callBackSelect",e),this.$nextTick((function(){setTimeout(this.removeBatchPopper,1)}))},isSelectDataAll:function(e){this.condition.selectAll=e,Object(i["B"])(this.$refs.table,this.data,this.selectRows),Object(i["c"])(this,this.data,this.data,this.selectRows),this.condition.unSelectIds=[],this.selectDataCounts=Object(i["u"])(this.condition,this.total,this.selectRows),this.selectIds=Array.from(this.selectRows).map((function(e){return e.id}))},headerDragend:function(e,t,o,s){if(o&&o.minWidth){var n=o.minWidth;n>e&&(o.width=n,e=n)}Object(i["y"])(this.fieldKey,o.columnKey,e)},showPopover:function(e,t,o){"name"===t.property&&(this.currentCaseId=e.id)},doLayout:function(){setTimeout(this.$refs.table.doLayout(),200)},filter:function(e){Object(i["a"])(e,this.condition),this.handleRefresh()},sort:function(e){this.condition.orders&&(this.condition.orders=[]),Object(i["d"])(e,this.condition),this.$emit("saveSortField",this.fieldKey,this.condition.orders),this.handleRefresh()},handleBatchEdit:function(){this.getMaintainerOptions(),this.$refs.batchEdit.open()},handleBatchMove:function(){this.$refs.testBatchMove.open(this.treeNodes,Array.from(this.selectRows).map((function(e){return e.id})),this.moduleOptions)},handleRowClick:function(e){this.$emit("handleRowClick",e)},handleRefresh:function(){this.clear(),this.$emit("refresh")},handlePageChange:function(){this.$emit("pageChange")},clear:function(){this.clearSelectRows()},checkTableRowIsSelect:function(){Object(i["g"])(this,this.condition,this.data,this.$refs.table,this.selectRows)},clearSelection:function(){this.clearSelectRows()},getSelectRows:function(){return this.selectRows},clearSelectRows:function(){this.selectRows.clear(),this.selectIds=[],this.condition.selectAll=!1,this.condition.unSelectIds=[],this.selectDataCounts=0,this.$refs.table&&this.$refs.table.clearSelection()},openCustomHeader:function(){this.$refs.customTableHeader.open(this.fields)},resetHeader:function(){this.$emit("update:fields",Object(i["o"])(this.fieldKey,this.customFields)),this.reloadTable()},toggleRowSelection:function(){this.$refs.table.toggleRowSelection()},reloadTable:function(){var e=this;this.tableActive=!1,this.$nextTick((function(){e.tableActive=!0}))}}},m=b,w=(o("1a3b"),o("cba8")),y=Object(w["a"])(m,s,n,!1,null,"5421eda2",null);t["a"]=y.exports},1763:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",e._l(e.buttons,(function(t,s){return o("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:t.permissions,expression:"btn.permissions"}],key:s,class:t.class,attrs:{disabled:e.isDisable(t),tip:t.tip,icon:t.icon,type:t.type,isDivButton:t.isDivButton},on:{exec:function(o){return e.click(t)},click:function(o){return o.stopPropagation(),e.clickStop(t)}}})})),1)},n=[],i=(o("51b3"),o("4c1e"),o("be8e")),l={name:"MsTableOperators",components:{MsTableOperatorButton:i["a"]},props:{row:Object,buttons:Array,index:Number},methods:{click:function(e){e.exec instanceof Function&&e.exec(this.row,this.index)},clickStop:function(e){e.stop instanceof Function&&e.stop(this.row,this.index)},isDisable:function(e){return!!e.isDisable&&e.isDisable(this.row)}},computed:{isTesterPermission:function(){return function(e){return!1!==e.isTesterPermission}}}},a=l,r=o("cba8"),c=Object(r["a"])(a,s,n,!1,null,"54f0f89e",null);t["a"]=c.exports},"1a3b":function(e,t,o){"use strict";o("20f6")},"20f6":function(e,t,o){},"344e":function(e,t,o){},"3e41":function(e,t,o){"use strict";o("6110")},"4a98":function(e,t,o){},6110:function(e,t,o){},"625a":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.field&&e.field.id!==e.prop?e._e():o("el-table-column",{attrs:{"min-width":e.minWidth,width:e.fieldsWidth?e.fieldsWidth[e.prop]:e.width,fixed:e.fixed,filters:e.filters,prop:e.prop,"column-key":e.columnKey?e.columnKey:e.prop,label:e.label,sortable:e.sortable,"show-overflow-tooltip":e.showOverflowTooltip},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",(function(){return[e._v(" "+e._s(t.row[e.prop])+" ")]}),{row:t.row,$index:t.$index})]}}],null,!0)})},n=[],i=(o("51b3"),{name:"Ms-table-column",props:{prop:String,label:String,width:String,minWidth:[String,Number],fixed:String,filters:Array,showOverflowTooltip:{type:Boolean,default:function(){return!0}},sortable:{type:[Boolean,String],default:function(){return!1}},field:{type:Object,default:function(){return null}},fieldsWidth:Object,columnKey:{type:String,default:function(){return null}}}}),l=i,a=o("cba8"),r=Object(a["a"])(l,s,n,!1,null,"d4fb727a",null);t["a"]=r.exports},"665c":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isShow?o("el-table-column",{attrs:{width:"1",resizable:!1,fixed:"left",align:"center"}},[o("el-popover",{staticStyle:{"margin-right":"0px"},attrs:{slot:"header",placement:"right",trigger:"click"},slot:"header"},[o("el-link",{ref:"selectAllLink",nativeOn:{click:function(t){return t.stopPropagation(),e.click("selectAll")}}},[o("span",{style:e.selectAllFontColor},[e._v(" "+e._s(e.$t("api_test.batch_menus.select_all_data",[e.total]))+" ")])]),o("br"),o("el-link",{ref:"selectPageAllLink",nativeOn:{click:function(t){return t.stopPropagation(),e.click("selectPageAll")}}},[o("span",{style:e.selectPageFontColor},[e._v(" "+e._s(e.$t("api_test.batch_menus.select_show_data",[e.tableDataCountInPage]))+" ")])]),o("i",{staticClass:"el-icon-arrow-down table-select-icon",attrs:{slot:"reference"},slot:"reference"})],1)],1):e._e()},n=[],i=(o("51b3"),{name:"MsTableHeaderSelectPopover",props:{total:{type:Number,default:function(){return 10}},pageSize:{type:Number,default:function(){return 10}},tableDataCountInPage:{type:Number,default:function(){return 10}},selectDataCounts:{type:Number,default:function(){return 0}}},created:function(){0===this.keyIndex&&(this.keyIndex++,this.reload())},data:function(){return{isShow:!0,selectAllFontColor:{color:"gray"},selectPageFontColor:{color:"gray"},keyIndex:0}},methods:{click:function(e){"selectPageAll"===e?(this.selectAllFontColor.color="gray",this.selectPageFontColor.color=document.body.style.getPropertyValue("--count_number")):"selectAll"===e?(this.selectAllFontColor.color=document.body.style.getPropertyValue("--count_number"),this.selectPageFontColor.color="gray"):(this.selectAllFontColor.color="gray",this.selectPageFontColor.color="gray"),0===this.keyIndex&&(this.keyIndex++,this.reload()),this.$emit(e)},reload:function(){var e=this;this.isShow=!1,this.$nextTick((function(){e.isShow=!0}))}}}),l=i,a=(o("a139"),o("cba8")),r=Object(a["a"])(l,s,n,!1,null,"89d1d080",null);t["a"]=r.exports},a139:function(e,t,o){"use strict";o("4a98")},afcf:function(e,t,o){"use strict";o("b553")},b553:function(e,t,o){},ddf4:function(e,t,o){"use strict";o("344e")},e5fd:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.$t("table.header_display_field"),visible:e.visible,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[o("ms-dialog-footer",{on:{cancel:e.close,confirm:e.saveHeader}})]},proxy:!0}])},[o("tree-transfer",{attrs:{title:[e.$t("table.fields_to_be_selected"),e.$t("table.selected_fields")],from_data:e.fromFields,draggable:!0,to_data:e.selectedFields,defaultProps:{label:"label"},"allow-drop":e.allowDrop,"default-checked-keys":e.selectedKeys,"default-transfer":e.defaultTransfer,mode:e.mode,filter:"",openAll:""}})],1)},n=[],i=(o("87d5"),o("8ea3"),o("89a8"),o("1a91"),o("993f"),o("15bc")),l=o("d2a4"),a=o.n(l),r=o("e077"),c={name:"MsCustomTableHeader",components:{MsDialogFooter:i["a"],treeTransfer:a.a},data:function(){return{visible:!1,value:[],fromFields:[],selectedFields:[],selectedKeys:[],defaultTransfer:!0,mode:"transfer"}},props:{type:String,customFields:Array},methods:{allowDrop:function(e,t,o){return"inner"!==o},open:function(e){var t=this;e=JSON.parse(JSON.stringify(e));var o=Object(r["k"])(this.type,this.customFields);this.selectedKeys=[],this.fromFields=[],this.selectedKeys=e.map((function(e){return e.key})),this.selectedFields=e,o.forEach((function(e){t.selectedKeys.indexOf(e.key)<0&&t.fromFields.push(e)})),this.visible=!0},saveHeader:function(){Object(r["x"])(this.type,this.selectedFields),this.$success(this.$t("commons.save_success")),this.$emit("reload"),this.close()},removeAt:function(e){this.list.splice(e,1)},close:function(){this.visible=!1}}},u=c,d=(o("3e41"),o("cba8")),h=Object(d["a"])(u,s,n,!1,null,null,null);t["a"]=h.exports},eab7:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isShow?o("div",[o("el-dropdown",{attrs:{placement:"bottom",trigger:"click",size:"medium"}},[o("div",{staticClass:"show-more-btn",on:{click:function(e){e.stopPropagation()}}},[o("el-tooltip",{attrs:{"popper-class":"batch-popper",value:!e.hasShowed,effect:"dark",content:e.$t("test_track.case.batch_operate"),placement:"top-start"}},[o("i",{staticClass:"el-icon-more ms-icon-more table-more-icon"})])],1),o("el-dropdown-menu",{staticClass:"dropdown-menu-class",attrs:{slot:"dropdown"},slot:"dropdown"},[o("div",{staticClass:"show-more-btn-title"},[e._v(e._s(e.$t("test_track.case.batch_handle",[e.size])))]),e._l(e.buttons,(function(t,s){return o("el-dropdown-item",{key:s,attrs:{disabled:e.isDisable(t)},nativeOn:{click:function(o){return o.stopPropagation(),e.click(t)}}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)],1):e._e()},n=[],i=o("045d"),l=(o("51b3"),o("993f"),o("495f")),a={name:"ShowMoreBtn",data:function(){return{disabled:!1}},props:{isShow:{type:Boolean,default:!1},buttons:Array,row:Object,size:Number,hasShowed:Boolean},created:function(){this.trashEnable&&this.buttons.splice(1,1)},methods:{click:function(e){e.handleClick instanceof Function&&e.handleClick()},isDisable:function(e){return!!(e.permissions&&e.permissions.length>0)&&!l["r"].apply(void 0,Object(i["a"])(e.permissions))}}},r=a,c=(o("afcf"),o("ddf4"),o("cba8")),u=Object(c["a"])(r,s,n,!1,null,"0c4d25dc",null);t["a"]=u.exports}}]);