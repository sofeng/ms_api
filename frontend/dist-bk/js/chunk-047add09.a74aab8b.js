(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-047add09"],{"0e18":function(t,e,o){"use strict";o("2b68")},"1be4":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",["Starting"===t.row.status?o("el-tag",{attrs:{size:"mini",type:"primary"}},[t._v(" "+t._s(t.row.status)+" ")]):"Running"===t.row.status?o("el-tag",{attrs:{size:"mini",type:"success"}},[t._v(" "+t._s(t.row.status)+" ")]):"Reporting"===t.row.status?o("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v(" "+t._s(t.row.status)+" ")]):"Completed"===t.row.status?o("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(" "+t._s(t.row.status)+" ")]):"Error"===t.row.status?o("el-tooltip",{attrs:{placement:"top",effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return[o("div",[t._v(t._s(t.row.description))])]},proxy:!0}])},[o("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(" "+t._s(t.row.status)+" ")])],1):o("span",[t._v(" "+t._s(t.row.status)+" ")])],1)},s=[],n={name:"MsPerformanceReportStatus",props:{row:Object}},r=n,i=o("cba8"),l=Object(i["a"])(r,a,s,!1,null,"70dde8e0",null);e["a"]=l.exports},2853:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{"close-on-click-modal":!1,"destroy-on-close":!0,title:t.$t("load_test.completed_test_report"),width:"60%",visible:t.loadReportVisible},on:{"update:visible":function(e){t.loadReportVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("ms-dialog-footer",{on:{cancel:t.close,confirm:t.handleCompare}})]},proxy:!0}])},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.reportLoadingResult.loading,expression:"reportLoadingResult.loading"}],staticClass:"basic-config",attrs:{data:t.tableData},on:{"select-all":t.handleSelectAll,select:t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection"}}),o("el-table-column",{attrs:{prop:"name",label:t.$t("commons.name"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id===t.report.id?o("i",{staticClass:"el-icon-star-on"}):t._e(),t._v(" "+t._s(e.row.name)+" ")]}}])}),o("el-table-column",{attrs:{prop:"userName",label:t.$t("report.user_name"),"show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"triggerMode",label:t.$t("test_track.report.list.trigger_mode")},scopedSlots:t._u([{key:"default",fn:function(t){return[o("report-trigger-mode-item",{attrs:{"trigger-mode":t.row.triggerMode}})]}}])}),o("el-table-column",{attrs:{label:t.$t("commons.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"el-icon-time"}),o("span",{staticClass:"last-modified"},[t._v(t._s(t._f("timestampFormatDate")(e.row.createTime)))])]}}])})],1),o("ms-table-pagination",{attrs:{change:t.getCompareReports,"current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)},s=[],n=o("045d"),r=(o("89a8"),o("d25d"),o("b110"),o("fe35"),o("1a91"),o("5a05"),o("87d5"),o("59d9")),i=o("15bc"),l=o("4191"),c=(o("4abd"),{name:"SameTestReports",components:{ReportTriggerModeItem:l["a"],MsDialogFooter:i["a"],MsTablePagination:r["a"]},data:function(){return{loadReportVisible:!1,reportLoadingResult:{},tableData:[],currentPage:1,pageSize:10,total:0,selectIds:new Set,report:{},compareReports:[]}},methods:{open:function(t){this.report=t,this.compareReports=[],this.getCompareReports(t),this.compareReports.push(t),this.loadReportVisible=!0},close:function(){this.loadReportVisible=!1},getCompareReports:function(){var t=this,e={testId:this.report.testId,filters:{status:["Completed"]}};this.reportLoadingResult=this.$post("/performance/report/list/all/"+this.currentPage+"/"+this.pageSize,e,(function(e){var o=e.data;t.total=o.itemCount,t.tableData=o.listObject}))},handleCompare:function(){var t=this,e=Object(n["a"])(this.selectIds);this.tableData.filter((function(o){return e.indexOf(o.id)>-1&&t.report.id!==o.id})).forEach((function(e){return t.compareReports.push(e)})),localStorage.setItem("compareReports",JSON.stringify(this.compareReports)),this.close(),this.$router.push({path:"/performance/report/compare/"+e[0]})},handleSelectAll:function(t){var e=this;t.length>0?this.tableData.forEach((function(t){e.selectIds.add(t.id)})):this.tableData.forEach((function(t){e.selectIds.has(t.id)&&e.selectIds.delete(t.id)}))},handleSelectionChange:function(t,e){this.selectIds.has(e.id)?this.selectIds.delete(e.id):this.selectIds.add(e.id)}}}),u=c,d=o("cba8"),p=Object(d["a"])(u,a,s,!1,null,"1160b3c0",null);e["a"]=p.exports},"2b68":function(t,e,o){},"344e":function(t,e,o){},4191:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",["TEST_PLAN_API"===t.triggerMode?o("span",[t._v(t._s(t.$t("commons.trigger_mode.api")))]):t._e(),"MANUAL"===t.triggerMode?o("span",[t._v(t._s(t.$t("commons.trigger_mode.manual")))]):t._e(),"SCHEDULE"===t.triggerMode?o("span",[t._v(t._s(t.$t("commons.trigger_mode.schedule")))]):t._e(),"TEST_PLAN_SCHEDULE"===t.triggerMode?o("span",[t._v(t._s(t.$t("commons.trigger_mode.schedule")))]):t._e(),"API"===t.triggerMode?o("span",[t._v(t._s(t.$t("commons.trigger_mode.api")))]):t._e(),"BATCH"===t.triggerMode?o("span",[t._v(t._s(t.$t("api_test.automation.batch_execute")))]):t._e()])},s=[],n={name:"ReportTriggerModeItem",props:["triggerMode"]},r=n,i=o("cba8"),l=Object(i["a"])(r,a,s,!1,null,"43af7f24",null);e["a"]=l.exports},"5dcc":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ms-container",[o("ms-main-container",[o("el-card",{staticClass:"table-card",scopedSlots:t._u([{key:"header",fn:function(){return[o("ms-table-header",{attrs:{condition:t.condition,"show-create":!1},on:{"update:condition":function(e){t.condition=e},search:t.search}})]},proxy:!0}])},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],staticClass:"adjust-table test-content",attrs:{border:"",data:t.tableData,height:t.screenHeight},on:{"select-all":t.handleSelectAll,select:t.handleSelect,"sort-change":t.sort,"filter-change":t.filter}},[o("el-table-column",{attrs:{type:"selection"}}),o("el-table-column",{attrs:{width:"40",resizable:!1,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("show-more-btn",{attrs:{"is-show":e.row.showMore,buttons:t.buttons,size:t.selectRows.size}})]}}])}),o("el-table-column",{attrs:{prop:"testName",label:t.$t("report.test_name"),"show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"name",label:t.$t("commons.name"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticStyle:{cursor:"pointer"},on:{click:function(o){return t.handleView(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),o("el-table-column",{attrs:{prop:"userName",label:t.$t("report.user_name"),"show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"maxUsers",width:"65",label:t.$t("report.max_users")}}),o("el-table-column",{attrs:{width:"100",prop:"avgResponseTime",label:t.$t("report.response_time")}}),o("el-table-column",{attrs:{prop:"tps",label:"TPS"}}),o("el-table-column",{attrs:{width:"100",prop:"testStartTime",label:t.$t("report.test_start_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.testStartTime>0?o("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.testStartTime)))]):t._e()]}}])}),o("el-table-column",{attrs:{width:"100",prop:"testEndTime",label:t.$t("report.test_end_time")},scopedSlots:t._u([{key:"default",fn:function(e){return["Completed"===e.row.status?o("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.testEndTime)))]):t._e()]}}])}),o("el-table-column",{attrs:{width:"90",prop:"testDuration",label:t.$t("report.test_execute_time")},scopedSlots:t._u([{key:"default",fn:function(e){return["Completed"===e.row.status?o("span",[t._v(" "+t._s(e.row.minutes)+t._s(t.$t("schedule.cron.minutes"))+" "+t._s(e.row.seconds)+t._s(t.$t("schedule.cron.seconds"))+" ")]):t._e()]}}])}),o("el-table-column",{attrs:{prop:"triggerMode",label:t.$t("test_track.report.list.trigger_mode"),"column-key":"triggerMode",filters:t.triggerFilters},scopedSlots:t._u([{key:"default",fn:function(t){return[o("report-trigger-mode-item",{attrs:{"trigger-mode":t.row.triggerMode}})]}}])}),o("el-table-column",{attrs:{prop:"status","column-key":"status",filters:t.statusFilters,label:t.$t("commons.status")},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[o("ms-performance-report-status",{attrs:{row:e}})]}}])}),o("el-table-column",{attrs:{width:"180",label:t.$t("commons.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_PERFORMANCE_REPORT:READ+DELETE"],expression:"['PROJECT_PERFORMANCE_REPORT:READ+DELETE']"}],attrs:{tip:t.$t("test_track.module.rename"),icon:"el-icon-edit",type:"success"},on:{exec:function(o){return t.handleRename(e.row)}}}),o("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_PERFORMANCE_REPORT:READ"],expression:"['PROJECT_PERFORMANCE_REPORT:READ']"}],attrs:{tip:t.$t("api_report.detail"),icon:"el-icon-s-data",type:"primary"},on:{exec:function(o){return t.handleView(e.row)}}}),o("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_PERFORMANCE_REPORT:READ"],expression:"['PROJECT_PERFORMANCE_REPORT:READ']"}],attrs:{tip:t.$t("load_test.report.diff"),icon:"el-icon-s-operation",type:"warning"},on:{exec:function(o){return t.handleDiff(e.row)}}}),o("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_PERFORMANCE_REPORT:READ+DELETE"],expression:"['PROJECT_PERFORMANCE_REPORT:READ+DELETE']"}],attrs:{tip:t.$t("api_report.delete"),icon:"el-icon-delete",type:"danger"},on:{exec:function(o){return t.handleDelete(e.row)}}})]}}])})],1),o("ms-table-pagination",{attrs:{change:t.initTableData,"current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1),o("same-test-reports",{ref:"compareReports"})],1)},s=[],n=(o("4c1e"),o("fee8"),o("89a8"),o("d25d"),o("b110"),o("fe35"),o("10dd"),o("1a91"),o("87d5"),o("59d9")),r=o("1b11"),i=o("489a"),l=o("1be4"),c=o("495f"),u=o("be8e"),d=o("4191"),p=o("8852"),m=o("10b9"),h=o("eab7"),f=o("e077"),g=o("15bc"),b=o("2853"),_={name:"PerformanceTestReportList",components:{SameTestReports:b["a"],MsDialogFooter:g["a"],MsTableHeader:m["a"],ReportTriggerModeItem:d["a"],MsTableOperatorButton:u["a"],MsPerformanceReportStatus:l["a"],MsTablePagination:n["a"],MsContainer:r["a"],MsMainContainer:i["a"],ShowMoreBtn:h["a"]},created:function(){this.testId=this.$route.path.split("/")[3],this.initTableData()},data:function(){return{tableHeaderKey:"PERFORMANCE_REPORT_TABLE",result:{},deletePath:"/performance/report/delete/",condition:{components:p["f"]},projectId:null,tableData:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,loading:!1,testId:null,screenHeight:"calc(100vh - 200px)",statusFilters:[{text:"Starting",value:"Starting"},{text:"Running",value:"Running"},{text:"Reporting",value:"Reporting"},{text:"Completed",value:"Completed"},{text:"Error",value:"Error"}],triggerFilters:[{text:this.$t("commons.trigger_mode.manual"),value:"MANUAL"},{text:this.$t("commons.trigger_mode.schedule"),value:"SCHEDULE"},{text:this.$t("commons.trigger_mode.api"),value:"API"}],buttons:[{name:this.$t("report.batch_delete"),handleClick:this.handleBatchDelete}],selectRows:new Set}},watch:{$route:function(t){"perReport"===t.name&&(this.projectId=t.params.projectId,this.testId=this.$route.path.split("/")[3],this.initTableData())}},methods:{handleTimeInfo:function(t){var e=this;if(t.testStartTime){var o=t.testDuration,a=Math.floor(o/60),s=o%60;this.$set(t,"minutes",a),this.$set(t,"seconds",s)}"Completed"!==t.status||t.testStartTime||(this.result=this.$get("/performance/report/content/report_time/"+t.id).then((function(o){var a=o.data.data;if(a){var s=a.duration,n=Math.floor(s/60),r=s%60;e.$set(t,"testStartTime",a.startTime),e.$set(t,"testEndTime",a.endTime),e.$set(t,"minutes",n),e.$set(t,"seconds",r)}})).catch((function(){})))},handleOverview:function(t){var e=this;"Completed"!==t.status||t.maxUsers||(this.result=this.$get("/performance/report/content/testoverview/"+t.id).then((function(o){var a=o.data.data;e.$set(t,"maxUsers",a.maxUsers),e.$set(t,"avgResponseTime",a.avgResponseTime),e.$set(t,"tps",a.avgTransactions)})).catch((function(){})))},initTableData:function(){var t=this;"all"!==this.testId?this.condition.testId=this.testId:this.condition.testId=null;var e=this.getSortField();e&&(this.condition.orders=e),Object(c["g"])()&&(this.condition.workspaceId=Object(c["j"])(),this.condition.projectId=Object(c["g"])(),this.result=this.$post(this.buildPagePath("/performance/report/list/all"),this.condition,(function(e){var o=e.data;t.total=o.itemCount,t.tableData=o.listObject,t.selectRows=new Set,t.tableData.forEach((function(e){t.handleOverview(e),t.handleTimeInfo(e)}))})))},search:function(t){this.initTableData(t)},buildPagePath:function(t){return t+"/"+this.currentPage+"/"+this.pageSize},handleSelectionChange:function(t){this.multipleSelection=t},handleRename:function(t){var e=this;this.$prompt(this.$t("commons.input_name"),"",{confirmButtonText:this.$t("commons.confirm"),cancelButtonText:this.$t("commons.cancel"),inputValue:t.name,inputValidator:function(t){if(t.length>63)return!1}}).then((function(o){var a=o.value;e.$post("/performance/report/rename",{id:t.id,name:a},(function(t){e.initTableData()}))})).catch((function(){}))},handleView:function(t){this.$router.push({path:"/performance/report/view/"+t.id})},handleDelete:function(t){var e=this;this.$alert(this.$t("report.delete_confirm")+t.name+"？","",{confirmButtonText:this.$t("commons.confirm"),callback:function(o){"confirm"===o&&e._handleDelete(t)}})},handleDiff:function(t){this.$refs.compareReports.open(t)},_handleDeleteNoMsg:function(t){var e=this;this.result=this.$post(this.deletePath+t.id,{},(function(){e.initTableData()}))},_handleDelete:function(t){var e=this;this.result=this.$post(this.deletePath+t.id,{},(function(){e.$success(e.$t("commons.delete_success")),e.initTableData()}))},sort:function(t){this.condition.orders&&(this.condition.orders=[]),Object(f["d"])(t,this.condition),this.saveSortField(this.tableHeaderKey,this.condition.orders),this.initTableData()},filter:function(t){Object(f["a"])(t,this.condition),this.initTableData()},handleSelect:function(t,e){this.selectRows.has(e)?(this.$set(e,"showMore",!1),this.selectRows.delete(e)):(this.$set(e,"showMore",!0),this.selectRows.add(e))},saveSortField:function(t,e){Object(f["z"])(t,JSON.stringify(e))},getSortField:function(){var t=Object(f["r"])(this.tableHeaderKey),e=null;if(t)try{e=JSON.parse(t)}catch(o){return null}return e},handleSelectAll:function(t){var e=this;t.length>0?this.tableData.forEach((function(t){e.$set(t,"showMore",!0),e.selectRows.add(t)})):(this.selectRows.clear(),this.tableData.forEach((function(t){e.$set(t,"showMore",!1)})))},handleBatchDelete:function(){var t=this;this.$alert(this.$t("report.delete_batch_confirm")+"？","",{confirmButtonText:this.$t("commons.confirm"),callback:function(e){if("confirm"===e){var o=[];t.selectRows.forEach((function(t){o.push(t.id)})),t.result=t.$post("/performance/report/batch/delete",{ids:o},(function(){t.initTableData()})),t.$success(t.$t("commons.delete_success"))}}})}}},v=_,w=(o("0e18"),o("cba8")),R=Object(w["a"])(v,a,s,!1,null,"3718047e",null);e["default"]=R.exports},afcf:function(t,e,o){"use strict";o("b553")},b553:function(t,e,o){},ddf4:function(t,e,o){"use strict";o("344e")},eab7:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isShow?o("div",[o("el-dropdown",{attrs:{placement:"bottom",trigger:"click",size:"medium"}},[o("div",{staticClass:"show-more-btn",on:{click:function(t){t.stopPropagation()}}},[o("el-tooltip",{attrs:{"popper-class":"batch-popper",value:!t.hasShowed,effect:"dark",content:t.$t("test_track.case.batch_operate"),placement:"top-start"}},[o("i",{staticClass:"el-icon-more ms-icon-more table-more-icon"})])],1),o("el-dropdown-menu",{staticClass:"dropdown-menu-class",attrs:{slot:"dropdown"},slot:"dropdown"},[o("div",{staticClass:"show-more-btn-title"},[t._v(t._s(t.$t("test_track.case.batch_handle",[t.size])))]),t._l(t.buttons,(function(e,a){return o("el-dropdown-item",{key:a,attrs:{disabled:t.isDisable(e)},nativeOn:{click:function(o){return o.stopPropagation(),t.click(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)],1):t._e()},s=[],n=o("045d"),r=(o("51b3"),o("993f"),o("495f")),i={name:"ShowMoreBtn",data:function(){return{disabled:!1}},props:{isShow:{type:Boolean,default:!1},buttons:Array,row:Object,size:Number,hasShowed:Boolean},created:function(){this.trashEnable&&this.buttons.splice(1,1)},methods:{click:function(t){t.handleClick instanceof Function&&t.handleClick()},isDisable:function(t){return!!(t.permissions&&t.permissions.length>0)&&!r["r"].apply(void 0,Object(n["a"])(t.permissions))}}},l=i,c=(o("afcf"),o("ddf4"),o("cba8")),u=Object(c["a"])(l,a,s,!1,null,"0c4d25dc",null);e["a"]=u.exports}}]);