(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc987aa2"],{"00f1":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report-export"},[s("ms-report-title",{attrs:{title:t.title,type:t.type}}),t._t("default")],2)},r=[],a=s("cd3e"),n={name:"MsReportExportTemplate",components:{MsReportTitle:a["a"]},props:{title:String,type:String}},o=n,c=(s("95ad"),s("cba8")),l=Object(c["a"])(o,i,r,!1,null,"e651856c",null);e["a"]=l.exports},"0124":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ms-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[s("ms-main-container",[s("el-card",[this.report.testId?s("section",{staticClass:"report-container"},[s("ms-api-report-view-header",{attrs:{report:t.report},on:{reportExport:t.handleExport}}),this.isNotRunning?s("main",[s("ms-metric-chart",{attrs:{content:t.content,totalTime:t.totalTime}}),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:t.$t("api_report.total"),name:"total"}},[s("ms-scenario-results",{attrs:{scenarios:t.content.scenarios},on:{requestResult:t.requestResult}})],1),s("el-tab-pane",{attrs:{name:"fail"}},[s("template",{slot:"label"},[s("span",{staticClass:"fail"},[t._v(t._s(t.$t("api_report.fail")))])]),s("ms-scenario-results",{attrs:{scenarios:t.fails},on:{requestResult:t.requestResult}})],2)],1)],1),s("el-col",{staticStyle:{"margin-top":"40px"},attrs:{span:16}},[t.isRequestResult?s("ms-request-result-tail",{attrs:{"request-type":t.requestType,request:t.request,"scenario-name":t.scenarioName}}):t._e()],1)],1),t.reportExportVisible?s("ms-api-report-export",{attrs:{id:"apiTestReport",title:t.report.testName,content:t.content,"total-time":t.totalTime}}):t._e()],1):t._e()],1):t._e()])],1)],1)},r=[],a=(s("89a8"),s("1a91"),s("51b3"),s("0cc2")),n=s("8347"),o=s("1fc1"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"metric-container"},[s("el-row",{attrs:{type:"flex",align:"middle"}},[s("div",{staticStyle:{width:"50%"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-row",[s("div",{staticClass:"metric-time"},[s("div",{staticClass:"value",staticStyle:{"margin-right":"50px"}},[t._v(t._s(t.time))])])]),s("ms-chart",{ref:"chart",attrs:{id:"chart",options:t.options,autoresize:!0}}),s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("i",{staticClass:"circle success"}),s("div",{staticClass:"metric-box"},[s("div",{staticClass:"value"},[t._v(t._s(t.content.success))]),s("div",{staticClass:"name"},[t._v(t._s(t.$t("api_report.success")))])]),s("div",{staticStyle:{width:"40px"}}),s("i",{staticClass:"circle fail"}),s("div",{staticClass:"metric-box"},[s("div",{staticClass:"value"},[t._v(t._s(t.content.error))]),s("div",{staticClass:"name"},[t._v(t._s(t.$t("api_report.fail")))])])])],1)],1),s("div",{staticClass:"split"}),s("div",{staticStyle:{width:"50%"}},[s("el-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},[s("div",{staticClass:"metric-icon-box"},[s("i",{staticClass:"el-icon-warning-outline fail"}),s("div",{staticClass:"value"},[t._v(t._s(t.fail))]),s("div",{staticClass:"name"},[t._v(t._s(t.$t("api_report.fail")))])]),s("div",{staticClass:"metric-icon-box"},[s("i",{staticClass:"el-icon-document-checked assertions"}),s("div",{staticClass:"value"},[t._v(t._s(t.assertions))]),s("div",{staticClass:"name"},[t._v(t._s(t.$t("api_report.assertions_pass")))])]),s("div",{staticClass:"metric-icon-box"},[s("i",{staticClass:"el-icon-document-copy total"}),s("div",{staticClass:"value"},[t._v(t._s(this.content.total))]),s("div",{staticClass:"name"},[t._v(t._s(t.$t("api_report.request")))])])])],1)])],1)},l=[],u=(s("d3af"),s("3996")),p={name:"MsMetricChart",components:{MsChart:u["a"]},props:{content:Object,totalTime:Number},data:function(){return{hour:0,minutes:0,seconds:0,time:0}},created:function(){this.initTime()},methods:{initTime:function(){this.time=this.totalTime,this.seconds=Math.floor(this.time/1e3),this.seconds>=1?(this.seconds>60&&(this.minutes=Math.round(this.time/60),this.seconds=Math.round(this.time%60),this.time=this.minutes+"min"+this.seconds+"s"),this.seconds>60&&(this.minutes=Math.round(this.time/60),this.seconds=Math.round(this.time%60),this.time=this.minutes+"min"+this.seconds+"s"),this.minutes>60&&(this.hour=Math.round(this.minutes/60),this.minutes=Math.round(this.minutes%60),this.time=this.hour+"hour"+this.minutes+"min"+this.seconds+"s"),this.time=this.seconds+"s"):this.time=this.totalTime+"ms"}},computed:{options:function(){return{color:["#67C23A","#F56C6C"],tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},title:[{text:this.content.total,subtext:this.$t("api_report.request"),top:"center",left:"center",textStyle:{rich:{align:"center",value:{fontSize:32,fontWeight:"bold",padding:[10,0]},name:{fontSize:14,fontWeight:"normal",color:"#7F7F7F"}}}}],series:[{type:"pie",radius:["80%","90%"],avoidLabelOverlap:!1,hoverAnimation:!1,itemStyle:{normal:{borderColor:"#FFF",shadowColor:"#E1E1E1",shadowBlur:10}},labelLine:{show:!1},data:[{value:this.content.success},{value:this.content.error}]}]}},fail:function(){return(this.content.error/this.content.total*100).toFixed(0)+"%"},assertions:function(){return this.content.passAssertions+" / "+this.content.totalAssertions}}},d=p,m=(s("ca57"),s("cba8")),h=Object(m["a"])(d,c,l,!1,null,"3e0475a8",null),f=h.exports,_=s("1774"),v=s("1b11"),R=s("489a"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ms-report-export-template",{attrs:{title:t.title,type:t.$t("report.api_test_report")}},[s("ms-metric-chart",{attrs:{content:t.content,totalTime:t.totalTime}}),t._l(t.content.scenarios,(function(e,i){return s("div",{key:i,staticClass:"scenario-result",attrs:{scenario:e}},[s("div",[s("el-card",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("api_report.scenario_name"))+"："+t._s(e.name)+" ")]},proxy:!0}],null,!0)},t._l(e.requestResults,(function(e,i){return s("div",{key:i,staticClass:"ms-border clearfix",attrs:{request:e}},[s("div",{staticClass:"request-top"},[s("div",[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"url"},[t._v(" "+t._s(e.url)+" ")])]),s("el-divider"),s("div",{staticClass:"request-bottom"},[s("api-report-reqest-header-item",{attrs:{title:t.$t("api_test.request.method")}},[s("span",{staticClass:"method"},[t._v(" "+t._s(e.method))])]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.response_time")}},[t._v(" "+t._s(e.responseResult.responseTime)+" ms ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.latency")}},[t._v(" "+t._s(e.responseResult.latency)+" ms ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.request_size")}},[t._v(" "+t._s(e.requestSize)+" bytes ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.response_size")}},[t._v(" "+t._s(e.responseResult.responseSize)+" bytes ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.error")}},[t._v(" "+t._s(e.error)+" ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.assertions")}},[t._v(" "+t._s(e.passAssertions+" / "+e.totalAssertions)+" ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.response_code")}},[t._v(" "+t._s(e.responseResult.responseCode)+" ")]),s("api-report-reqest-header-item",{attrs:{title:t.$t("api_report.result")}},[e.success?s("el-tag",{attrs:{size:"mini",type:"success"}},[t._v(" "+t._s(t.$t("api_report.success"))+" ")]):s("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(" "+t._s(t.$t("api_report.fail"))+" ")])],1)],1)],1)})),0)],1)])}))],2)},g=[],C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(" "+t._s(t.title)+" ")]),s("div",[t._t("default")],2)])},x=[],q={name:"ApiReportReqestHeaderItem",props:{title:String}},y=q,w=(s("4a28"),Object(m["a"])(y,C,x,!1,null,"f1e0c9c2",null)),T=w.exports,$=s("cd3e"),E=s("00f1"),M={name:"MsApiReportExport",components:{MsReportExportTemplate:E["a"],MsReportTitle:$["a"],MsMetricChart:f,ApiReportReqestHeaderItem:T,MsRequestResultTail:n["a"],MsScenarioResult:o["a"]},props:{content:Object,totalTime:Number,title:String},data:function(){return{}}},S=M,N=(s("fd82"),Object(m["a"])(S,b,g,!1,null,"563c11b6",null)),O=N.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"report-header"},[s("el-row",[s("el-col",[s("span",[t._v(t._s(t.report.projectName)+" / ")]),s("router-link",{attrs:{to:t.path}},[t._v(t._s(t.report.testName))]),s("span",{staticClass:"time"},[t._v(" "+t._s(t._f("timestampFormatDate")(t.report.createTime)))]),s("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_API_REPORT:READ+EXPORT"],expression:"['PROJECT_API_REPORT:READ+EXPORT']"}],staticClass:"export-button",staticStyle:{"margin-left":"1200px"},attrs:{disabled:t.isReadOnly,plain:"",type:"primary",size:"mini"},on:{click:function(e){return t.handleExport(t.report.name)}}},[t._v(" "+t._s(t.$t("test_track.plan_view.export_report"))+" ")])],1)],1)],1)},j=[],k={name:"MsApiReportViewHeader",props:["report"],computed:{path:function(){return"/api/test/edit?id="+this.report.testId}},data:function(){return{isReadOnly:!1}},created:function(){},methods:{handleExport:function(t){this.$emit("reportExport",t)}}},F=k,I=(s("76ed"),Object(m["a"])(F,A,j,!1,null,"3cae3077",null)),z=I.exports,P=s("4dd5"),V=s("495f"),D={name:"MsApiReportViewDetail",components:{MsApiReportViewHeader:z,MsApiReportExport:O,MsMainContainer:R["a"],MsContainer:v["a"],MsScenarioResults:_["a"],MsRequestResultTail:n["a"],MsMetricChart:f,MsScenarioResult:o["a"],MsRequestResult:a["a"]},data:function(){return{activeName:"total",content:{},report:{},loading:!0,fails:[],totalTime:0,isRequestResult:!1,request:{},scenarioName:null,reportExportVisible:!1,requestType:void 0}},props:["reportId"],activated:function(){this.isRequestResult=!1},watch:{reportId:function(){this.getReport()}},methods:{init:function(){this.loading=!0,this.report={},this.content={},this.fails=[],this.report={},this.isRequestResult=!1},handleClick:function(t,e){this.isRequestResult=!1},getReport:function(){var t=this;if(this.init(),this.reportId){var e="/api/report/get/"+this.reportId;this.$get(e,(function(e){if(t.report=e.data||{},e.data)if(t.isNotRunning){try{t.content=JSON.parse(t.report.content)}catch(s){throw s}t.getFails(),t.loading=!1}else setTimeout(t.getReport,2e3);else t.loading=!1,t.$error(t.$t("api_report.not_exist"))}))}},getFails:function(){var t=this;this.isNotRunning&&(this.fails=[],this.totalTime=0,this.content.scenarios.forEach((function(e){t.totalTime=t.totalTime+Number(e.responseTime);var s=Object.assign({},e);e.error>0&&(t.fails.push(s),s.requestResults=[],e.requestResults.forEach((function(t){if(!t.success){var e=Object.assign({},t);s.requestResults.push(e)}})))})))},requestResult:function(t){this.isRequestResult=!1,this.requestType=void 0,t.request.body.indexOf("[Callable Statement]")>-1&&(this.requestType=P["A"].TYPES.SQL),this.$nextTick((function(){this.isRequestResult=!0,this.request=t.request,this.scenarioName=t.scenarioName}))},handleExport:function(){this.reportExportVisible=!0;var t=this.exportReportReset;this.$nextTick((function(){Object(V["F"])("apiTestReport",.57),t()}))},exportReportReset:function(){this.$router.go(0)}},created:function(){this.getReport()},computed:{path:function(){return"/api/test/edit?id="+this.report.testId},isNotRunning:function(){return"Running"!==this.report.status}}},J=D,H=(s("f756"),s("f782"),Object(m["a"])(J,i,r,!1,null,"082c415c",null));e["a"]=H.exports},"0c5e":function(t,e,s){},"227b":function(t,e,s){"use strict";var i=s("8735"),r=s("58db"),a=s("3ffc"),n=s("8e74"),o=i.RangeError;t.exports=function(t){var e=a(n(this)),s="",i=r(t);if(i<0||i==1/0)throw o("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(s+=e);return s}},"3f21":function(t,e,s){},"4a28":function(t,e,s){"use strict";s("7154")},"5f11":function(t,e,s){t.exports=s.p+"img/logo-MeterSphere.041f133a.png"},"6dda":function(t,e,s){},7154:function(t,e,s){},"76ed":function(t,e,s){"use strict";s("82a4")},7982:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ms-api-report-view-detail",{attrs:{"report-id":t.reportId}})},r=[],a=s("0124"),n={name:"MsApiReportView",components:{MsApiReportViewDetail:a["a"]},computed:{reportId:function(){return this.$route.params.reportId}}},o=n,c=s("cba8"),l=Object(c["a"])(o,i,r,!1,null,"2cb38716",null);e["default"]=l.exports},"82a4":function(t,e,s){},"95ad":function(t,e,s){"use strict";s("3f21")},ca57:function(t,e,s){"use strict";s("f73c")},cd3e:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"clearfix report-title"},[s("div",{staticClass:"report-left"},[s("div",{staticClass:"title"},[t._v(" 【"+t._s(t.type)+"】- "+t._s(t.title)+" ")]),s("div",[s("span",{staticClass:"time"},[t._v(t._s(t._f("timestampFormatDate")(new Date)))])])]),t._m(0)])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"report-right"},[i("img",{staticClass:"logo",attrs:{src:s("5f11")}})])}],a={name:"MsReportTitle",props:{title:String,type:String},data:function(){return{}}},n=a,o=(s("defb"),s("cba8")),c=Object(o["a"])(n,i,r,!1,null,"41c9b43d",null);e["a"]=c.exports},d3af:function(t,e,s){"use strict";var i=s("88d4"),r=s("8735"),a=s("ce5b"),n=s("58db"),o=s("e14f"),c=s("227b"),l=s("9ad2"),u=r.RangeError,p=r.String,d=Math.floor,m=a(c),h=a("".slice),f=a(1..toFixed),_=function(t,e,s){return 0===e?s:e%2===1?_(t,e-1,s*t):_(t*t,e/2,s)},v=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},R=function(t,e,s){var i=-1,r=s;while(++i<6)r+=e*t[i],t[i]=r%1e7,r=d(r/1e7)},b=function(t,e){var s=6,i=0;while(--s>=0)i+=t[s],t[s]=d(i/e),i=i%e*1e7},g=function(t){var e=6,s="";while(--e>=0)if(""!==s||0===e||0!==t[e]){var i=p(t[e]);s=""===s?i:s+m("0",7-i.length)+i}return s},C=l((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!l((function(){f({})}));i({target:"Number",proto:!0,forced:C},{toFixed:function(t){var e,s,i,r,a=o(this),c=n(t),l=[0,0,0,0,0,0],d="",f="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return p(a);if(a<0&&(d="-",a=-a),a>1e-21)if(e=v(a*_(2,69,1))-69,s=e<0?a*_(2,-e,1):a/_(2,e,1),s*=4503599627370496,e=52-e,e>0){R(l,0,s),i=c;while(i>=7)R(l,1e7,0),i-=7;R(l,_(10,i,1),0),i=e-1;while(i>=23)b(l,1<<23),i-=23;b(l,1<<i),R(l,1,1),b(l,2),f=g(l)}else R(l,0,s),R(l,1<<-e,0),f=g(l)+m("0",c);return c>0?(r=f.length,f=d+(r<=c?"0."+m("0",c-r)+f:h(f,0,r-c)+"."+h(f,r-c))):f=d+f,f}})},dd13:function(t,e,s){},defb:function(t,e,s){"use strict";s("dd13")},f117:function(t,e,s){},f73c:function(t,e,s){},f756:function(t,e,s){"use strict";s("f117")},f782:function(t,e,s){"use strict";s("6dda")},fd82:function(t,e,s){"use strict";s("0c5e")}}]);