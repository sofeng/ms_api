(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-799fc707"],{"3e14":function(e,t,i){"use strict";i("dd38")},"45af":function(e,t,i){},"9f05":function(e,t,i){"use strict";i("f9b4")},a9d7:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}]},[i("el-card",{scopedSlots:e._u([{key:"header",fn:function(){return[i("ms-table-header",{attrs:{"create-permission":["SYSTEM_GROUP:READ+CREATE","ORGANIZATION_GROUP:READ+CREATE"],condition:e.condition,"create-tip":e.$t("group.create"),title:e.$t("group.group_permission")},on:{"update:condition":function(t){e.condition=t},search:e.initData,create:e.create}})]},proxy:!0}])},[i("el-table",{staticClass:"adjust-table",staticStyle:{width:"100%"},attrs:{data:e.groups,border:"",height:e.screenHeight},on:{"sort-change":e.sort}},[i("el-table-column",{attrs:{prop:"name",label:e.$t("commons.name"),"show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"type",label:e.$t("group.type")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.userGroupType[t.row.type]?e.userGroupType[t.row.type]:t.row.type))])]}}])}),i("el-table-column",{attrs:{label:e.$t("commons.member"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{staticClass:"member-size",attrs:{type:"primary"},on:{click:function(i){return e.memberClick(t.row)}}},[e._v(" "+e._s(t.row.memberSize||0)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"scopeName",label:e.$t("group.scope")}}),i("el-table-column",{attrs:{prop:"createTime",label:e.$t("commons.create_time"),sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("timestampFormatDate")(t.row.createTime)))])]}}])}),i("el-table-column",{attrs:{prop:"updateTime",label:e.$t("commons.update_time"),sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("timestampFormatDate")(t.row.updateTime)))])]}}])}),i("el-table-column",{attrs:{prop:"creator",label:e.$t("group.operator")}}),i("el-table-column",{attrs:{prop:"description",label:e.$t("group.description")}}),i("el-table-column",{attrs:{label:e.$t("commons.operating"),"min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("ms-table-operator",{attrs:{"edit-permission":["SYSTEM_GROUP:READ+EDIT","ORGANIZATION_GROUP:READ+EDIT"],"delete-permission":["SYSTEM_GROUP:READ+DELETE","ORGANIZATION_GROUP:READ+DELETE"]},on:{editClick:function(i){return e.edit(t.row)},deleteClick:function(i){return e.del(t.row)}},scopedSlots:e._u([{key:"middle",fn:function(){return[i("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["SYSTEM_GROUP:READ+SETTING_PERMISSION","ORGANIZATION_GROUP:READ+SETTING_PERMISSION"],expression:"['SYSTEM_GROUP:READ+SETTING_PERMISSION', 'ORGANIZATION_GROUP:READ+SETTING_PERMISSION']"}],attrs:{tip:e.$t("group.set_permission"),icon:"el-icon-s-tools"},on:{exec:function(i){return e.setPermission(t.row)}}})]},proxy:!0}],null,!0)})],1)]}}])})],1),i("ms-table-pagination",{attrs:{change:e.initData,"current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1),i("group-member",{ref:"groupMember",on:{refresh:e.initData}}),i("edit-user-group",{ref:"editUserGroup",on:{refresh:e.initData}}),i("edit-permission",{ref:"editPermission"}),i("ms-delete-confirm",{ref:"deleteConfirm",attrs:{title:e.$t("group.delete")},on:{delete:e._handleDel}})],1)},s=[],r=i("10b9"),n=i("1c98"),a=i("59d9"),l=i("e5a9"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogVisible,width:"50%",title:e.title,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"auto",size:"small",rules:e.rules}},[i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:e.$t("commons.name"),prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),i("el-col",{attrs:{span:11,offset:2}},[i("el-form-item",{attrs:{label:e.$t("group.type"),prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("group.select_type"),disabled:"edit"===e.dialogType},on:{change:e.changeGroup},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{label:e.$t("group.system"),value:"SYSTEM"}}),i("el-option",{attrs:{label:e.$t("group.organization"),value:"ORGANIZATION"}}),i("el-option",{attrs:{label:e.$t("group.workspace"),value:"WORKSPACE"}}),i("el-option",{attrs:{label:e.$t("group.project"),value:"PROJECT"}})],1)],1)],1)],1),i("el-form-item",{attrs:{label:e.$t("group.description"),prop:"description"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:e.$t("group.global_group")}},[i("el-switch",{attrs:{disabled:"edit"===e.dialogType||"SYSTEM"===e.form.type},on:{change:function(t){return e.change(e.form.global)}},model:{value:e.form.global,callback:function(t){e.$set(e.form,"global",t)},expression:"form.global"}})],1),e.show?i("el-form-item",{attrs:{label:e.$t("group.belong_organization"),prop:"scopeId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("group.select_belong_organization"),disabled:"edit"===e.dialogType,clearable:""},model:{value:e.form.scopeId,callback:function(t){e.$set(e.form,"scopeId",t)},expression:"form.scopeId"}},e._l(e.organizations,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("commons.confirm")))]),i("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("commons.cancel")))])],1)],1)],1)},c=[],p=i("4abd"),m=i("495f"),d={name:"EditUserGroup",data:function(){return{dialogVisible:!1,form:{global:!1},rules:{name:[{required:!0,message:this.$t("commons.input_name"),trigger:"blur"},{min:2,max:50,message:this.$t("commons.input_limit",[2,50]),trigger:"blur"}],type:[{required:!0,message:this.$t("group.select_type"),trigger:"blur"}],description:[{min:2,max:90,message:this.$t("commons.input_limit",[2,90]),trigger:"blur"}],scopeId:[{required:!0,message:this.$t("group.select_belong_organization"),trigger:"blur"}]},dialogType:"",isSystem:!1,show:!0,organizations:[],title:this.$t("group.create")}},props:{dialogTitle:{type:String,default:function(){return this.$t("group.create")}}},methods:{onSubmit:function(){"create"!==this.dialogType?("edit"===this.dialogType&&this.edit(),this.dialogType):this.create()},create:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.$post("/user/group/add",e.form,(function(){e.$success(e.$t("commons.save_success")),e.$emit("refresh"),e.dialogVisible=!1}))}))},edit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.$post("/user/group/edit",e.form,(function(){e.$success(e.$t("commons.modify_success")),e.$emit("refresh"),e.dialogVisible=!1}))}))},open:function(e,t,i){this.title=i,this.isSystem=!1,this.show=!0,this.dialogVisible=!0,this.dialogType=t,this.form=Object.assign({},e),"create"!==t&&(this.form.type===p["k"]?(this.form.global=!0,this.show=!1):(this.form.global="global"===this.form.scopeId,this.show=!this.form.global)),this.getOrganization()},cancel:function(){this.dialogVisible=!1},change:function(e){this.show=!this.isSystem&&!e},changeGroup:function(e){e===p["k"]?(this.isSystem=!0,this.$set(this.form,"global",!0),this.change(!0)):this.isSystem=!1},getOrganization:function(){var e=this;this.$get("/user/group/org/"+Object(m["i"])(),(function(t){var i=t.data;i&&(e.organizations=i)}))}}},f=d,h=i("cba8"),b=Object(h["a"])(f,u,c,!1,null,"d72e63c2",null),g=b.exports,_=i("be8e"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}],attrs:{"close-on-click-modal":!1,visible:e.dialogVisible,width:"65%",title:e.$t("group.set_permission"),"destroy-on-close":!0,top:"5%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticStyle:{height:"60vh",overflow:"auto"}},[i("el-table",{staticClass:"permission-table",staticStyle:{width:"100%"},attrs:{"span-method":e.objectSpanMethod,border:"",data:e.tableData,"row-class-name":e.handleLicenseResource}},[i("el-table-column",{attrs:{prop:"type",label:e.$t("group.functional_menu"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["PROJECT"!==t.row.type?i("span",[e._v(" "+e._s(e.userGroupType[t.row.type]?e.userGroupType[t.row.type]:t.row.type)+" ")]):i("span",[e._v(e._s(e._computedMenuName(t.row.resource)))])]}}])}),i("el-table-column",{attrs:{prop:"resource",label:e.$t("group.operation_object"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.resource.name)+" ")]}}])}),i("el-table-column",{attrs:{prop:"permissions",label:e.$t("group.permission")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("group-permission",{attrs:{permissions:t.row.permissions,selected:e.tableData},on:{"update:selected":function(t){e.tableData=t}}})]}}])}),i("el-table-column",{attrs:{width:"50px",label:e.$t("group.check_all")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"text-align":"center"}},[i("el-checkbox",{on:{change:function(i){return e.handleSelectAll(i,t.row.permissions)}}})],1)]}}])})],1)],1),i("el-button",{staticStyle:{"margin-top":"10px","margin-left":"5px"},attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("commons.confirm"))+" ")]),i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("commons.cancel")))])],1)},y=[],$=i("045d"),S=(i("2788"),i("4c1e"),i("fee8"),i("89a8"),i("1a91"),i("8ea3"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.permissions,(function(t,o){return i("span",{key:o},[t.license?i("el-checkbox",{directives:[{name:"xpack",rawName:"v-xpack"}],staticClass:"permission-checkbox",on:{change:function(i){return e.change(i,t)}},model:{value:t["checked"],callback:function(i){e.$set(t,"checked",i)},expression:"permission['checked']"}},[e._v(" "+e._s(t.name)+" ")]):i("el-checkbox",{staticClass:"permission-checkbox",on:{change:function(i){return e.change(i,t)}},model:{value:t["checked"],callback:function(i){e.$set(t,"checked",i)},expression:"permission['checked']"}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)}),w=[],k=(i("5a05"),{name:"GroupPermission",props:{permissions:{type:Array,default:function(){return{}}},selected:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{change:function(e,t){var i=t.id.split(":")[1];if("READ"!==i||e){if(e){var o=this.permissions.filter((function(e){return"READ"===e.id.split(":")[1]}));o.length>0&&(o[0].checked=e)}t.checked=e}else this.permissions.map((function(t){return t.checked=e}))}}}),T=k,x=(i("9f05"),Object(h["a"])(T,S,w,!1,null,"8365f306",null)),E=x.exports,R={name:"EditPermission",data:function(){return{dialogVisible:!1,tableData:[],selected:[],group:{},result:{},spanArr:[]}},components:{GroupPermission:E},computed:{userGroupType:function(){return l["k"]}},methods:{open:function(e){this.tableData=[],this.spanArr=[],this.dialogVisible=!0,this.group=Object.assign({},e),this.getGroupJson()},getGroupJson:function(){var e=this;this.result=this.$post("/user/group/permission",this.group,(function(t){var i=t.data;i&&(e.tableData=i.permissions,e._getUniteMenu())}))},_getUniteMenu:function(){for(var e=["TRACK","API","PERFORMANCE","REPORT"],t=0;t<this.tableData.length;t++)if(0===t)this.spanArr.push(1),this.pos=0;else{var i=!1;i="PROJECT"!==this.tableData[t].type?this.tableData[t].type===this.tableData[t-1].type:!e.includes(this.tableData[t].resource.id.split("_")[1])||this.tableData[t].resource.id.split("_")[1]===this.tableData[t-1].resource.id.split("_")[1],i?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t)}},_computedMenuName:function(e){return l["h"][e.id.split("_")[1]]?l["h"][e.id.split("_")[1]]:"项目"},onSubmit:function(){var e=this,t={},i=[];this.tableData.forEach((function(e){i.push.apply(i,Object($["a"])(e.permissions))})),t.userGroupId=this.group.id,t.permissions=i,this.result=this.$post("/user/group/permission/edit",t,(function(){e.$success(e.$t("commons.save_success")),e.dialogVisible=!1}))},cancel:function(){this.dialogVisible=!1},objectSpanMethod:function(e){var t=e.rowIndex,i=e.columnIndex;if(0===i){var o=this.spanArr[t],s=o>0?1:0;return{rowspan:o,colspan:s}}},handleSelectAll:function(e,t){t.map((function(t){return t.checked=e}))},handleLicenseResource:function(e){if(e.row.resource.license)return Object(m["p"])()?void 0:"hidden-row"}}},D=R,I=(i("3e14"),Object(h["a"])(D,v,y,!1,null,"c5edd332",null)),O=I.exports,P=i("a369"),A=i("e077"),M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}],staticClass:"group-member",attrs:{"close-on-click-modal":!1,visible:e.visible,width:"65%",top:"15vh","destroy-on-close":!0},on:{"update:visible":function(t){e.visible=t},close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[i("ms-table-header",{attrs:{condition:e.condition,"create-tip":e.$t("member.create"),title:e.$t("commons.member")},on:{"update:condition":function(t){e.condition=t},create:e.addMemberBtn,search:e.search}})]},proxy:!0}])},[i("el-table",{staticClass:"adjust-table",staticStyle:{width:"100%","margin-top":"5px"},attrs:{border:!0,data:e.memberData}},[i("el-table-column",{attrs:{prop:"id",label:"ID"}}),i("el-table-column",{attrs:{prop:"name",label:e.$t("commons.username"),"show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"email",label:e.$t("commons.email"),"show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"phone",label:e.$t("commons.phone"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.phone||"-")+" ")]}}])}),e.showTypeLabel?i("el-table-column",{attrs:{label:e.typeLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.sourceResult.loading,expression:"sourceResult.loading"}],staticStyle:{height:"150px",overflow:"auto"}},e._l(e.groupSource,(function(t){return i("el-tag",{key:t.id,staticStyle:{"margin-left":"5px","margin-top":"5px"},attrs:{type:t.name,size:"small"}},[e._v(" "+e._s(t.name)+" ")])})),1),i("el-link",{attrs:{slot:"reference",type:"primary"},on:{click:function(i){return e.getGroupSource(t.row)}},slot:"reference"},[e._v("点击查看")])],1)]}}],null,!1,249925920)}):e._e(),i("el-table-column",{attrs:{label:e.$t("commons.operating")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("ms-table-operator",{attrs:{tip2:e.$t("commons.remove"),"show-edit":e.showTypeLabel},on:{editClick:function(i){return e.editMemberBtn(t.row)},deleteClick:function(i){return e.removeMember(t.row)}}})],1)]}}])})],1),i("ms-table-pagination",{attrs:{change:e.search,"current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.memberResult.loading,expression:"memberResult.loading"}],attrs:{"close-on-click-modal":!1,visible:e.memberVisible,width:"45%",title:e.title,"destroy-on-close":!0},on:{"update:visible":function(t){e.memberVisible=t},close:e.memberDialogClose},scopedSlots:e._u([{key:"footer",fn:function(){return[i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{size:"medium"},on:{click:function(t){e.memberVisible=!1}}},[e._v(e._s(e.$t("commons.cancel")))]),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addMember},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}},[e._v(" "+e._s(e.$t("commons.confirm"))+" ")])],1)]},proxy:!0}])},[i("el-form",{ref:"memberFrom",staticStyle:{"margin-right":"40px"},attrs:{"label-position":"right",model:e.form,size:"small",rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:e.$t("commons.member"),prop:"userIds"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","popper-append-to-body":!1,disabled:e.userSelectDisable,placeholder:e.$t("member.please_choose_member")},model:{value:e.form.userIds,callback:function(t){e.$set(e.form,"userIds",t)},expression:"form.userIds"}},e._l(e.users,(function(t){return i("el-option",{key:t.id,attrs:{label:t.id,value:t.id}},[[i("span",{staticClass:"user-select-left"},[e._v(e._s(t.name)+" ("+e._s(t.id)+")")]),i("span",{staticClass:"user-select-right"},[e._v(e._s(t.email))])]],2)})),1)],1),e.showTypeLabel?i("el-form-item",{attrs:{label:e.typeLabel,prop:"sourceIds"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.typeLabel,clearable:"",multiple:"",filterable:""},model:{value:e.form.sourceIds,callback:function(t){e.$set(e.form,"sourceIds",t)},expression:"form.sourceIds"}},e._l(e.sourceData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e()],1)],1)],1)},G=[],z=(i("d5ee"),{name:"GroupMember",components:{MsTableHeader:r["a"],MsTablePagination:a["a"],MsTableOperator:n["a"]},data:function(){return{visible:!1,memberVisible:!1,condition:{},memberData:[],currentPage:1,pageSize:5,total:0,result:{},sourceResult:{},memberResult:{},group:{},groupSource:[],sourceData:[],users:[],form:{},title:"",submitType:"",userSelectDisable:!1,rules:{userIds:{required:!0,message:this.$t("member.please_choose_member"),trigger:"blur"},sourceIds:{required:!0,message:this.$t("group.select_belong_source"),trigger:"blur"}}}},computed:{typeLabel:function(){var e=this.group.type;return e===p["i"]?this.$t("group.belong_organization"):e===p["l"]?this.$t("group.belong_workspace"):e===p["j"]?this.$t("group.belong_project"):""},showTypeLabel:function(){return this.group.type!==p["k"]}},methods:{init:function(){var e=this;this.condition.userGroupId=this.group.id,this.result=this.$post("/user/group/user/"+this.currentPage+"/"+this.pageSize,this.condition,(function(t){var i=t.data;if(i){var o=i.itemCount,s=i.listObject;e.total=o,e.memberData=s}}))},open:function(e){this.visible=!0,this.group=e,this.init()},close:function(){this.visible=!1,this.$emit("refresh")},addMemberBtn:function(){this.title=this.$t("member.create"),this.memberVisible=!0,this.submitType="ADD",this.getUser(),this.getResource()},search:function(){this.init()},editMemberBtn:function(e){var t=this;this.title=this.$t("member.modify"),this.userSelectDisable=!0,this.memberVisible=!0,this.submitType="EDIT",this.getUser(),this.getResource(),this.$get("/user/group/source/"+e.id+"/"+this.group.id,(function(i){var o=i.data,s=[e.id],r=o.map((function(e){return e.id}));t.$set(t.form,"userIds",s),t.$set(t.form,"sourceIds",r)}))},editMember:function(){var e=this;this.form.groupId=this.group.id,this.$refs["memberFrom"].validate((function(t){if(!t)return!1;e.result=e.$post("/user/group/edit/member",e.form,(function(){e.$success(e.$t("commons.save_success")),e.init(),e.memberVisible=!1}))}))},getUser:function(){var e=this;this.memberResult=this.$get("/user/list/",(function(t){e.users=t.data}))},removeMember:function(e){var t=this;this.$confirm(this.$t("member.remove_member").toString(),"",{confirmButtonText:this.$t("commons.confirm"),cancelButtonText:this.$t("commons.cancel"),type:"warning"}).then((function(){t.result=t.$get("/user/group/rm/"+e.id+"/"+t.group.id,(function(){t.$success(t.$t("commons.remove_success")),t.init()}))})).catch((function(){t.$info(t.$t("commons.remove_cancel"))}))},getGroupSource:function(e){var t=this;this.groupSource=[],this.sourceResult=this.$get("/user/group/source/"+e.id+"/"+this.group.id,(function(e){t.groupSource=e.data}))},addMember:function(){"ADD"===this.submitType?this._addMember():"EDIT"===this.submitType&&this.editMember()},_addMember:function(){var e=this;this.form.groupId=this.group.id,this.$refs["memberFrom"].validate((function(t){if(!t)return!1;e.result=e.$post("/user/group/add/member",e.form,(function(){e.$success(e.$t("commons.save_success")),e.init(),e.memberVisible=!1}))}))},getResource:function(){var e=this;this.memberResult=this.$get("/organization/list/resource/"+this.group.id+"/"+this.group.type,(function(t){var i=t.data;i&&e._setResource(e.group.type,i)}))},_setResource:function(e,t){switch(e){case p["i"]:this.sourceData=t.organizations;break;case p["l"]:this.sourceData=t.workspaces;break;case p["j"]:this.sourceData=t.projects;break;default:}},memberDialogClose:function(){this.form={},this.memberVisible=!1,this.userSelectDisable=!1}}}),C=z,N=(i("c48b"),Object(h["a"])(C,M,G,!1,null,"53672c12",null)),U=N.exports,j={name:"UserGroup",components:{GroupMember:U,EditUserGroup:g,MsTableHeader:r["a"],MsTableOperator:n["a"],MsTablePagination:a["a"],MsTableOperatorButton:_["a"],EditPermission:O,MsDeleteConfirm:P["a"]},data:function(){return{result:{},condition:{},currentPage:1,pageSize:10,total:0,screenHeight:"calc(100vh - 200px)",groups:[],currentGroup:{}}},activated:function(){this.initData()},computed:{userGroupType:function(){return l["k"]}},methods:{initData:function(){var e=this;this.result=this.$post("/user/group/get/"+this.currentPage+"/"+this.pageSize,this.condition,(function(t){var i=t.data;if(i){var o=i.itemCount,s=i.listObject;e.total=o,e.groups=s}}))},create:function(){this.$refs.editUserGroup.open({},"create",this.$t("group.create"))},edit:function(e){"admin"!==e.id?this.$refs.editUserGroup.open(e,"edit",this.$t("group.edit")):this.$warning(this.$t("group.admin_not_allow_edit"))},_handleDel:function(e){var t=this;this.result=this.$get("/user/group/delete/"+e.id,(function(){t.$success(t.$t("commons.delete_success")),t.initData()}))},del:function(e){e.system?this.$warning(this.$t("group.admin_not_allow_delete")):this.$refs.deleteConfirm.open(e)},copy:function(e){},setPermission:function(e){this.$refs.editPermission.open(e)},sort:function(e){this.condition.orders&&(this.condition.orders=[]),Object(A["d"])(e,this.condition),this.initData()},memberClick:function(e){this.$refs.groupMember.open(e)}}},V=j,L=Object(h["a"])(V,o,s,!1,null,"9fa58f3e",null);t["default"]=L.exports},c48b:function(e,t,i){"use strict";i("45af")},dd38:function(e,t,i){},e5a9:function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"f",(function(){return a})),i.d(t,"e",(function(){return l})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return c})),i.d(t,"g",(function(){return p})),i.d(t,"a",(function(){return m})),i.d(t,"k",(function(){return d})),i.d(t,"h",(function(){return f}));var o=i("0692"),s=[{value:"input",text:"输入框"},{value:"textarea",text:"文本框"},{value:"select",text:"单选下拉列表"},{value:"multipleSelect",text:"多选下拉列表"},{value:"radio",text:"单选框"},{value:"checkbox",text:"多选框"},{value:"member",text:"单选成员"},{value:"multipleMember",text:"多选成员"},{value:"data",text:"日期"},{value:"int",text:"整型"},{value:"float",text:"浮点型"}],r=[{value:"TEST_CASE",text:"用例模板"},{value:"ISSUE",text:"缺陷模板"}],n=[{value:"functional",text:"功能用例"}],a=[{value:"metersphere",text:"Metersphere"},{value:"Jira",text:"JIRA"},{value:"Tapd",text:"Tapd"},{value:"Zentao",text:"禅道"},{value:"AzureDevops",text:"Azure Devops"}],l={input:"输入框",textarea:"文本框",select:"单选下拉列表",multipleSelect:"多选下拉列表",radio:"单选框",checkbox:"多选框",member:"单选成员",multipleMember:"多选成员",data:"日期",int:"整型",float:"浮点型"},u={ISSUE:"缺陷模板",TEST_CASE:"用例模板"},c={"用例状态":"custom_field.case_status","责任人":"custom_field.case_maintainer","用例等级":"custom_field.case_priority","创建人":"custom_field.issue_creator","处理人":"custom_field.issue_processor","状态":"custom_field.issue_status","严重程度":"custom_field.issue_severity"},p={new:"新建",closed:"已关闭",resolved:"已解决",active:"激活",delete:"已删除"},m={LEVEL_FILTERS:[{text:"P0",value:"P0"},{text:"P1",value:"P1"},{text:"P2",value:"P2"},{text:"P3",value:"P3"}],RESULT_FILTERS:[{text:"Fail",value:"Fail"},{text:"Success",value:"Success"}],STATUS_FILTERS:[{text:o["default"].t("test_track.plan.plan_status_prepare"),value:"Prepare"},{text:o["default"].t("test_track.plan.plan_status_running"),value:"Underway"},{text:o["default"].t("test_track.plan.plan_status_completed"),value:"Completed"},{text:o["default"].t("test_track.plan.plan_status_trash"),value:"Trash"}]},d={SYSTEM:"系统",ORGANIZATION:"组织",WORKSPACE:"工作空间",PROJECT:"项目"},f={TRACK:"测试跟踪",API:"接口测试",PERFORMANCE:"性能测试",REPORT:"报告统计"}},f9b4:function(e,t,i){}}]);