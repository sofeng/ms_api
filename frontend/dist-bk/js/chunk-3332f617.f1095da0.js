(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3332f617"],{"0521":function(e,t,o){},"263cb":function(e,t,o){"use strict";o("0521")},"344e":function(e,t,o){},"438d":function(e,t,o){},"4a98":function(e,t,o){},"665c":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isShow?o("el-table-column",{attrs:{width:"1",resizable:!1,fixed:"left",align:"center"}},[o("el-popover",{staticStyle:{"margin-right":"0px"},attrs:{slot:"header",placement:"right",trigger:"click"},slot:"header"},[o("el-link",{ref:"selectAllLink",nativeOn:{click:function(t){return t.stopPropagation(),e.click("selectAll")}}},[o("span",{style:e.selectAllFontColor},[e._v(" "+e._s(e.$t("api_test.batch_menus.select_all_data",[e.total]))+" ")])]),o("br"),o("el-link",{ref:"selectPageAllLink",nativeOn:{click:function(t){return t.stopPropagation(),e.click("selectPageAll")}}},[o("span",{style:e.selectPageFontColor},[e._v(" "+e._s(e.$t("api_test.batch_menus.select_show_data",[e.tableDataCountInPage]))+" ")])]),o("i",{staticClass:"el-icon-arrow-down table-select-icon",attrs:{slot:"reference"},slot:"reference"})],1)],1):e._e()},r=[],n=(o("51b3"),{name:"MsTableHeaderSelectPopover",props:{total:{type:Number,default:function(){return 10}},pageSize:{type:Number,default:function(){return 10}},tableDataCountInPage:{type:Number,default:function(){return 10}},selectDataCounts:{type:Number,default:function(){return 0}}},created:function(){0===this.keyIndex&&(this.keyIndex++,this.reload())},data:function(){return{isShow:!0,selectAllFontColor:{color:"gray"},selectPageFontColor:{color:"gray"},keyIndex:0}},methods:{click:function(e){"selectPageAll"===e?(this.selectAllFontColor.color="gray",this.selectPageFontColor.color=document.body.style.getPropertyValue("--count_number")):"selectAll"===e?(this.selectAllFontColor.color=document.body.style.getPropertyValue("--count_number"),this.selectPageFontColor.color="gray"):(this.selectAllFontColor.color="gray",this.selectPageFontColor.color="gray"),0===this.keyIndex&&(this.keyIndex++,this.reload()),this.$emit(e)},reload:function(){var e=this;this.isShow=!1,this.$nextTick((function(){e.isShow=!0}))}}}),s=n,i=(o("a139"),o("cba8")),l=Object(i["a"])(s,a,r,!1,null,"89d1d080",null);t["a"]=l.exports},"9a6b":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}]},[o("el-card",{staticClass:"table-card",scopedSlots:e._u([{key:"header",fn:function(){return[o("ms-table-header",{attrs:{"create-permission":["PROJECT_USER:READ+CREATE"],condition:e.condition,"create-tip":e.$t("member.create"),title:e.$t("commons.member"),"have-search":!1},on:{"update:condition":function(t){e.condition=t},search:e.initTableData,create:e.create}})]},proxy:!0}])},[o("el-table",{ref:"userTable",staticClass:"adjust-table ms-select-all-fixed",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,height:e.screenHeight}},[o("el-table-column",{attrs:{prop:"id",label:"ID"}}),o("el-table-column",{attrs:{prop:"name",label:e.$t("commons.username")}}),o("el-table-column",{attrs:{prop:"email",label:e.$t("commons.email")}}),o("el-table-column",{attrs:{prop:"phone",label:e.$t("commons.phone")}}),o("el-table-column",{attrs:{prop:"groups",label:e.$t("commons.group"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("ms-roles-tag",{attrs:{roles:e.row.groups,type:"success"}})]}}])}),o("el-table-column",{attrs:{label:e.$t("commons.operating")},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("ms-table-operator",{attrs:{"edit-permission":["PROJECT_USER:READ+EDIT"],"delete-permission":["PROJECT_USER:READ+DELETE"],tip2:e.$t("commons.remove")},on:{editClick:function(o){return e.edit(t.row)},deleteClick:function(o){return e.del(t.row)}}})],1)]}}])})],1),o("ms-table-pagination",{attrs:{change:e.initTableData,"current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogResult.loading,expression:"dialogResult.loading"}],attrs:{"close-on-click-modal":!1,title:e.$t("member.modify"),visible:e.updateVisible,width:"30%","destroy-on-close":!0},on:{"update:visible":function(t){e.updateVisible=t},close:e.handleClose},scopedSlots:e._u([{key:"footer",fn:function(){return[o("ms-dialog-footer",{on:{cancel:function(t){e.updateVisible=!1},confirm:function(t){return e.updateProjectMember("updateUserForm")}}})]},proxy:!0}])},[o("el-form",{ref:"updateUserForm",attrs:{model:e.form,"label-position":"right","label-width":"100px",size:"small"}},[o("el-form-item",{attrs:{label:"ID",prop:"id"}},[o("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),o("el-form-item",{attrs:{label:e.$t("commons.username"),prop:"name"}},[o("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:e.$t("commons.email"),prop:"email"}},[o("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),o("el-form-item",{attrs:{label:e.$t("commons.phone"),prop:"phone"}},[o("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:e.$t("commons.group"),prop:"groupIds",rules:{required:!0,message:e.$t("group.please_select_group"),trigger:"change"}}},[o("el-select",{staticClass:"select-width",attrs:{multiple:"",placeholder:e.$t("group.please_select_group")},model:{value:e.form.groupIds,callback:function(t){e.$set(e.form,"groupIds",t)},expression:"form.groupIds"}},e._l(e.form.allgroups,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),o("edit-member",{ref:"editMember",on:{refresh:e.initTableData}})],1)},r=[],n=(o("8ea3"),o("10dd"),o("2edc")),s=o("1c98"),i=o("59d9"),l=o("978f"),c=o("10b9"),u=o("15bc"),d=o("665c"),m=o("eab7"),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("add-member",{ref:"addMember",attrs:{"group-type":e.GROUP_PROJECT,"group-scope-id":e.organizationId},on:{submit:e.submit}})},f=[],b=o("4abd"),h=o("495f"),g=o("bcc4"),$={name:"EditMember",components:{AddMember:g["a"]},data:function(){return{dialogVisible:!1,form:{},rules:{userIds:[{required:!0,message:this.$t("member.please_choose_member"),trigger:["blur"]}],groupIds:[{required:!0,message:this.$t("group.please_select_group"),trigger:["blur"]}]},userList:[]}},computed:{projectId:function(){return Object(h["g"])()},organizationId:function(){return Object(h["f"])()},GROUP_PROJECT:function(){return b["j"]}},methods:{submit:function(e){var t=this;e["projectId"]=this.projectId,this.result=this.$post("user/project/member/add",e,(function(){t.$success(t.$t("commons.save_success")),t.$emit("refresh"),t.$refs.addMember.close()}))},open:function(){this.$refs.addMember.open()},handleClose:function(){this.dialogVisible=!1,this.form={}}}},v=$,_=(o("263cb"),o("cba8")),k=Object(_["a"])(v,p,f,!1,null,"412f4b33",null),y=k.exports,w={name:"Member",components:{EditMember:y,MsRolesTag:n["a"],MsTableOperator:s["a"],MsTablePagination:i["a"],MsCreateBox:l["a"],MsTableHeader:c["a"],MsDialogFooter:u["a"],MsTableHeaderSelectPopover:d["a"],ShowMoreBtn:m["a"]},data:function(){return{condition:{},result:{},dialogResult:{},tableData:[],screenHeight:"calc(100vh - 195px)",currentPage:1,pageSize:10,total:0,updateVisible:!1,form:{}}},computed:{projectId:function(){return Object(h["g"])()}},methods:{create:function(){this.$refs.editMember.open()},initTableData:function(){var e=this,t={};t.projectId=this.projectId,this.projectId&&(this.result=this.$post("/user/project/member/list/"+this.currentPage+"/"+this.pageSize,t,(function(t){var o=t.data;e.tableData=o.listObject;for(var a="/user/group/list/project/"+e.projectId,r=function(t){e.$get(a+"/"+encodeURIComponent(e.tableData[t].id),(function(o){var a=o.data;e.$set(e.tableData[t],"groups",a)}))},n=0;n<e.tableData.length;n++)r(n);e.total=o.itemCount})))},edit:function(e){var t=this;this.updateVisible=!0,this.form=Object.assign({},e);var o=this.form.groups.map((function(e){return e.id}));this.dialogResult=this.$post("/user/group/list",{type:b["j"],resourceId:Object(h["f"])()},(function(e){t.$set(t.form,"allgroups",e.data)})),this.$set(this.form,"groupIds",o)},del:function(e){var t=this;this.$confirm(this.$t("member.remove_member"),"",{confirmButtonText:this.$t("commons.confirm"),cancelButtonText:this.$t("commons.cancel"),type:"warning"}).then((function(){t.result=t.$get("/user/project/member/delete/"+t.projectId+"/"+encodeURIComponent(e.id),(function(){t.$success(t.$t("commons.remove_success")),t.initTableData()}))})).catch((function(){t.$info(t.$t("commons.remove_cancel"))}))},handleClose:function(){this.form={},this.updateVisible=!1},updateProjectMember:function(e){var t=this,o={id:this.form.id,name:this.form.name,email:this.form.email,phone:this.form.phone,groupIds:this.form.groupIds,projectId:this.projectId};this.$refs[e].validate((function(e){e&&(t.result=t.$post("/project/member/update",o,(function(){t.$success(t.$t("commons.modify_success")),t.updateVisible=!1,t.initTableData()})))}))}},activated:function(){this.initTableData()}},C=w,I=(o("9b75"),Object(_["a"])(C,a,r,!1,null,"7d6f862f",null));t["default"]=I.exports},"9b75":function(e,t,o){"use strict";o("438d")},a139:function(e,t,o){"use strict";o("4a98")},afcf:function(e,t,o){"use strict";o("b553")},b553:function(e,t,o){},ddf4:function(e,t,o){"use strict";o("344e")},eab7:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isShow?o("div",[o("el-dropdown",{attrs:{placement:"bottom",trigger:"click",size:"medium"}},[o("div",{staticClass:"show-more-btn",on:{click:function(e){e.stopPropagation()}}},[o("el-tooltip",{attrs:{"popper-class":"batch-popper",value:!e.hasShowed,effect:"dark",content:e.$t("test_track.case.batch_operate"),placement:"top-start"}},[o("i",{staticClass:"el-icon-more ms-icon-more table-more-icon"})])],1),o("el-dropdown-menu",{staticClass:"dropdown-menu-class",attrs:{slot:"dropdown"},slot:"dropdown"},[o("div",{staticClass:"show-more-btn-title"},[e._v(e._s(e.$t("test_track.case.batch_handle",[e.size])))]),e._l(e.buttons,(function(t,a){return o("el-dropdown-item",{key:a,attrs:{disabled:e.isDisable(t)},nativeOn:{click:function(o){return o.stopPropagation(),e.click(t)}}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)],1):e._e()},r=[],n=o("045d"),s=(o("51b3"),o("993f"),o("495f")),i={name:"ShowMoreBtn",data:function(){return{disabled:!1}},props:{isShow:{type:Boolean,default:!1},buttons:Array,row:Object,size:Number,hasShowed:Boolean},created:function(){this.trashEnable&&this.buttons.splice(1,1)},methods:{click:function(e){e.handleClick instanceof Function&&e.handleClick()},isDisable:function(e){return!!(e.permissions&&e.permissions.length>0)&&!s["r"].apply(void 0,Object(n["a"])(e.permissions))}}},l=i,c=(o("afcf"),o("ddf4"),o("cba8")),u=Object(c["a"])(l,a,r,!1,null,"0c4d25dc",null);t["a"]=u.exports}}]);