(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea8993e"],{"07a9":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ms-container",[n("ms-main-container",[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],staticClass:"table-card",scopedSlots:t._u([{key:"header",fn:function(){return[n("ms-table-header",{attrs:{condition:t.condition,"create-permission":["PROJECT_PERFORMANCE_TEST:READ+CREATE"],createTip:t.$t("load_test.create")},on:{"update:condition":function(e){t.condition=e},search:t.search,create:t.create}})]},proxy:!0}])},[n("el-table",{staticClass:"adjust-table test-content",attrs:{border:"",data:t.tableData,height:t.screenHeight},on:{"sort-change":t.sort,"filter-change":t.filter}},[n("el-table-column",{attrs:{prop:"num",label:"ID",width:"100","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"name",label:t.$t("commons.name"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.link(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{prop:"userName",sortable:"custom",filters:t.userFilters,"column-key":"user_id",label:t.$t("load_test.user_name"),"show-overflow-tooltip":""}}),n("el-table-column",{attrs:{width:"200",sortable:"",prop:"createTime",label:t.$t("commons.create_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.createTime)))])]}}])}),n("el-table-column",{attrs:{width:"200",sortable:"",prop:"updateTime",label:t.$t("commons.update_time")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.updateTime)))])]}}])}),n("el-table-column",{attrs:{prop:"reportCount",label:t.$t("report.load_test_report"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.reportCount>0?n("el-link",{on:{click:function(n){return t.reports(e.row)}}},[t._v(" "+t._s(e.row.reportCount)+" ")]):n("span",[t._v(" "+t._s(e.row.reportCount))])]}}])}),n("el-table-column",{attrs:{prop:"status","column-key":"status",filters:t.statusFilters,label:t.$t("commons.status")},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[n("ms-performance-test-status",{attrs:{row:e}})]}}])}),n("el-table-column",{attrs:{width:"150",label:t.$t("commons.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("ms-table-operators",{attrs:{buttons:t.buttons,row:e.row}})],1)]}}])})],1),n("ms-table-pagination",{attrs:{change:t.initTableData,"current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1)],1)},i=[],o=(n("10dd"),n("8ea3"),n("89a8"),n("1a91"),n("4c1e"),n("6df5"),n("87d5"),n("59d9")),r=n("1c98"),a=n("1b11"),c=n("489a"),l=n("c7dd"),u=n("1763"),p=n("495f"),d=n("10b9"),f=n("8852"),m=n("e077"),h={components:{MsTableHeader:d["a"],MsPerformanceTestStatus:l["a"],MsTablePagination:o["a"],MsTableOperator:r["a"],MsContainer:a["a"],MsMainContainer:c["a"],MsTableOperators:u["a"]},data:function(){return{tableHeaderKey:"PERFORMANCE_TEST_TABLE",result:{},deletePath:"/performance/delete",condition:{components:f["h"]},projectId:null,tableData:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,loading:!1,testId:null,buttons:[{tip:this.$t("commons.edit"),icon:"el-icon-edit",exec:this.handleEdit,permissions:["PROJECT_PERFORMANCE_TEST:READ+EDIT"]},{tip:this.$t("commons.copy"),icon:"el-icon-copy-document",type:"success",exec:this.handleCopy,permissions:["PROJECT_PERFORMANCE_TEST:READ+COPY"]},{tip:this.$t("commons.delete"),icon:"el-icon-delete",type:"danger",exec:this.handleDelete,permissions:["PROJECT_PERFORMANCE_TEST:READ+DELETE"]}],statusFilters:[{text:"Saved",value:"Saved"},{text:"Starting",value:"Starting"},{text:"Running",value:"Running"},{text:"Reporting",value:"Reporting"},{text:"Completed",value:"Completed"},{text:"Error",value:"Error"}],userFilters:[],screenHeight:"calc(100vh - 200px)"}},watch:{$route:function(t){"perPlan"===t.name&&(this.projectId=t.params.projectId,this.initTableData())}},created:function(){this.projectId=this.$route.params.projectId,this.initTableData(),this.getMaintainerOptions()},methods:{getMaintainerOptions:function(){var t=this;Object(p["j"])();this.$post("/user/project/member/tester/list",{projectId:Object(p["g"])()},(function(e){t.userFilters=e.data.map((function(t){return{text:t.name,value:t.id}}))}))},initTableData:function(){var t=this,e=this.getSortField();e&&(this.condition.orders=e),this.condition.projectId=Object(p["g"])(),this.condition.workspaceId=Object(p["j"])(),this.result=this.$post(this.buildPagePath("/performance/list"),this.condition,(function(e){var n=e.data;t.total=n.itemCount,t.tableData=n.listObject,t.tableData.forEach((function(e){t.result=t.$get("/performance/test/report-count/"+e.id,(function(n){t.$set(e,"reportCount",n.data)}))}))}))},search:function(t){this.initTableData(t)},buildPagePath:function(t){return t+"/"+this.currentPage+"/"+this.pageSize},handleSelectionChange:function(t){this.multipleSelection=t},handleEdit:function(t){this.$router.push({path:"/performance/test/edit/"+t.id})},handleCopy:function(t){var e=this;this.result=this.$post("/performance/copy",{id:t.id},(function(){e.$success(e.$t("commons.copy_success")),e.search()}))},handleDelete:function(t){var e=this;this.$alert(this.$t("load_test.delete_confirm")+t.name+"ï¼Ÿ","",{confirmButtonText:this.$t("commons.confirm"),callback:function(n){"confirm"===n&&e._handleDelete(t)}})},_handleDelete:function(t){var e=this,n={id:t.id};this.result=this.$post(this.deletePath,n,(function(){e.$success(e.$t("commons.delete_success")),e.initTableData()}))},sort:function(t){this.condition.orders&&(this.condition.orders=[]),Object(m["d"])(t,this.condition),this.saveSortField(this.tableHeaderKey,this.condition.orders),this.initTableData()},filter:function(t){Object(m["a"])(t,this.condition),this.initTableData()},link:function(t){this.$router.push({path:"/performance/test/edit/"+t.id})},reports:function(t){this.$router.push({path:"/performance/report/"+t.id})},create:function(){Object(p["g"])()?this.$router.push("/performance/test/create"):this.$warning(this.$t("commons.check_project_tip"))},saveSortField:function(t,e){Object(m["z"])(t,JSON.stringify(e))},getSortField:function(){var t=Object(m["r"])(this.tableHeaderKey),e=null;if(t)try{e=JSON.parse(t)}catch(n){return null}return e}}},b=h,_=(n("cd04"),n("cba8")),g=Object(_["a"])(b,s,i,!1,null,"6b5e7fd2",null);e["default"]=g.exports},1763:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",t._l(t.buttons,(function(e,s){return n("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permissions,expression:"btn.permissions"}],key:s,class:e.class,attrs:{disabled:t.isDisable(e),tip:e.tip,icon:e.icon,type:e.type,isDivButton:e.isDivButton},on:{exec:function(n){return t.click(e)},click:function(n){return n.stopPropagation(),t.clickStop(e)}}})})),1)},i=[],o=(n("51b3"),n("4c1e"),n("be8e")),r={name:"MsTableOperators",components:{MsTableOperatorButton:o["a"]},props:{row:Object,buttons:Array,index:Number},methods:{click:function(t){t.exec instanceof Function&&t.exec(this.row,this.index)},clickStop:function(t){t.stop instanceof Function&&t.stop(this.row,this.index)},isDisable:function(t){return!!t.isDisable&&t.isDisable(this.row)}},computed:{isTesterPermission:function(){return function(t){return!1!==t.isTesterPermission}}}},a=r,c=n("cba8"),l=Object(c["a"])(a,s,i,!1,null,"54f0f89e",null);e["a"]=l.exports},"66e9":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"6df5":function(t,e,n){"use strict";var s=n("e3f7"),i=n("9dd2"),o=n("25ef"),r=n("8e74"),a=n("66e9"),c=n("3ffc"),l=n("ecf4"),u=n("bacb");i("search",(function(t,e,n){return[function(e){var n=r(this),i=void 0==e?void 0:l(e,t);return i?s(i,e,n):new RegExp(e)[t](c(n))},function(t){var s=o(this),i=c(t),r=n(e,s,i);if(r.done)return r.value;var l=s.lastIndex;a(l,0)||(s.lastIndex=0);var p=u(s,i);return a(s.lastIndex,l)||(s.lastIndex=l),null===p?-1:p.index}]}))},c7dd:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["Saved"===t.row.status?n("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(" "+t._s(t.row.status)+" ")]):"Starting"===t.row.status?n("el-tag",{attrs:{size:"mini",type:"primary"}},[t._v(" "+t._s(t.row.status)+" ")]):"Running"===t.row.status?n("el-tag",{attrs:{size:"mini",type:"success"}},[t._v(" "+t._s(t.row.status)+" ")]):"Reporting"===t.row.status?n("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v(" "+t._s(t.row.status)+" ")]):"Completed"===t.row.status?n("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(" "+t._s(t.row.status)+" ")]):"Error"===t.row.status?n("el-tooltip",{attrs:{placement:"top",effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[t._v(t._s(t.row.description))])]},proxy:!0}])},[n("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(" "+t._s(t.row.status)+" ")])],1):n("span",[t._v(" "+t._s(t.row.status)+" ")])],1)},i=[],o={name:"MsPerformanceTestStatus",props:{row:Object}},r=o,a=n("cba8"),c=Object(a["a"])(r,s,i,!1,null,"20647f62",null);e["a"]=c.exports},cd04:function(t,e,n){"use strict";n("fb98")},fb98:function(t,e,n){}}]);