(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-514bce9c"],{"5c22":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("el-tabs",{staticClass:"system-setting",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:e.$t("system_config.base_config"),name:"base"}},[s("base-setting")],1),s("el-tab-pane",{attrs:{label:e.$t("system_parameter_setting.mailbox_service_settings"),name:"email"}},[s("email-setting")],1),s("el-tab-pane",{attrs:{label:e.$t("system_parameter_setting.ldap_setting"),name:"ldap"}},[s("ldap-setting")],1),e.hasLicense()?s("el-tab-pane",{attrs:{label:e.$t("display.title"),name:"display"}},[s("ms-display")],1):e._e(),e.hasLicense()?s("el-tab-pane",{attrs:{label:e.$t("auth_source.title"),name:"auth"}},[s("ms-auth")],1):e._e(),e.hasLicense()?s("el-tab-pane",{attrs:{label:e.$t("module.title"),name:"module"}},[s("ms-module")],1):e._e()],1)],1)},n=[],a=(s("89a8"),s("fe35"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}]},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formInline",staticClass:"demo-form-inline",attrs:{model:e.formInline,rules:e.rules,disabled:e.show,size:"small"},scopedSlots:e._u([{key:"footer",fn:function(){},proxy:!0}])},[s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_parameter_setting.SMTP_host"),prop:"host"}},[s("el-input",{attrs:{placeholder:e.$t("system_parameter_setting.SMTP_host")},on:{input:function(t){return e.change()}},model:{value:e.formInline.host,callback:function(t){e.$set(e.formInline,"host",t)},expression:"formInline.host"}})],1)],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_parameter_setting.SMTP_port"),prop:"port"}},[s("el-input",{attrs:{placeholder:e.$t("system_parameter_setting.SMTP_port")},on:{input:function(t){return e.change()}},model:{value:e.formInline.port,callback:function(t){e.$set(e.formInline,"port",t)},expression:"formInline.port"}})],1)],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_parameter_setting.SMTP_account"),prop:"account"}},[s("el-input",{attrs:{placeholder:e.$t("system_parameter_setting.SMTP_account")},on:{input:function(t){return e.change()}},model:{value:e.formInline.account,callback:function(t){e.$set(e.formInline,"account",t)},expression:"formInline.account"}})],1)],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_parameter_setting.SMTP_password"),prop:"password"}},[s("el-input",{ref:"input",attrs:{placeholder:e.$t("system_parameter_setting.SMTP_password"),autocomplete:"new-password","show-password":"",type:"text"},on:{focus:e.changeType},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}})],1)],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_parameter_setting.test_recipients")}},[s("el-input",{ref:"input",attrs:{placeholder:e.$t("system_parameter_setting.test_recipients"),autocomplete:"new-password",type:"text"},model:{value:e.formInline.recipient,callback:function(t){e.$set(e.formInline,"recipient",t)},expression:"formInline.recipient"}}),s("p",{staticStyle:{color:"#8a8b8d"}},[e._v("("+e._s(e.$t("system_parameter_setting.tip"))+")")])],1)],1)],1),s("div",{staticStyle:{border:"0px","margin-bottom":"20px"}},[s("el-checkbox",{attrs:{label:e.$t("system_parameter_setting.SSL")},model:{value:e.formInline.ssl,callback:function(t){e.$set(e.formInline,"ssl",t)},expression:"formInline.ssl"}})],1),s("div",{staticStyle:{border:"0px","margin-bottom":"20px"}},[s("el-checkbox",{attrs:{label:e.$t("system_parameter_setting.TLS")},model:{value:e.formInline.tls,callback:function(t){e.$set(e.formInline,"tls",t)},expression:"formInline.tls"}})],1)],1),s("div",[s("el-button",{attrs:{type:"primary",disabled:e.disabledConnection,size:"small"},on:{click:function(t){return e.testConnection("formInline")}}},[e._v(" "+e._s(e.$t("system_parameter_setting.test_connection"))+" ")]),e.showEdit?s("el-button",{attrs:{size:"small"},on:{click:e.edit}},[e._v(e._s(e.$t("commons.edit")))]):e._e(),e.showSave?s("el-button",{attrs:{type:"success",disabled:e.disabledSave,size:"small"},on:{click:function(t){return e.save("formInline")}}},[e._v(" "+e._s(e.$t("commons.save"))+" ")]):e._e(),e.showCancel?s("el-button",{attrs:{type:"info",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("commons.cancel")))]):e._e()],1)],1)}),i=[],r={name:"EmailSetting",data:function(){return{formInline:{},input:"",visible:!0,result:{},showEdit:!0,showSave:!1,showCancel:!1,show:!0,disabledConnection:!1,disabledSave:!1,loading:!1,rules:{host:[{required:!0,message:this.$t("system_parameter_setting.host"),trigger:["change","blur"]}],port:[{required:!0,message:this.$t("system_parameter_setting.port"),trigger:["change","blur"]}],account:[{required:!0,message:this.$t("system_parameter_setting.account"),trigger:["change","blur"]}]}}},created:function(){this.query()},methods:{changeType:function(){this.$refs.input="password"},query:function(){var e=this;this.result=this.$get("/system/mail/info",(function(t){e.formInline=t.data,e.formInline.ssl="true"===e.formInline.ssl,e.formInline.tls="true"===e.formInline.tls,e.$nextTick((function(){e.$refs.formInline.clearValidate()}))}))},change:function(){this.formInline.host&&this.formInline.port&&this.formInline.account?(this.disabledConnection=!1,this.disabledSave=!1):(this.disabledConnection=!0,this.disabledSave=!0)},testConnection:function(e){var t=this,s={"smtp.host":this.formInline.host,"smtp.port":this.formInline.port,"smtp.account":this.formInline.account,"smtp.password":this.formInline.password,"smtp.ssl":this.formInline.ssl,"smtp.tls":this.formInline.tls,"smtp.recipient":this.formInline.recipient};this.$refs[e].validate((function(e){if(!e)return!1;t.result=t.$post("/system/testConnection",s,(function(e){t.$success(t.$t("commons.connection_successful"))}))}))},edit:function(){this.showEdit=!1,this.showSave=!0,this.showCancel=!0,this.show=!1},save:function(e){var t=this;this.showEdit=!0,this.showCancel=!1,this.showSave=!1,this.show=!0;var s=[{paramKey:"smtp.host",paramValue:this.formInline.host,type:"text",sort:1},{paramKey:"smtp.port",paramValue:this.formInline.port,type:"text",sort:2},{paramKey:"smtp.account",paramValue:this.formInline.account,type:"text",sort:3},{paramKey:"smtp.password",paramValue:this.formInline.password,type:"password",sort:4},{paramKey:"smtp.ssl",paramValue:this.formInline.ssl,type:"text",sort:5},{paramKey:"smtp.tls",paramValue:this.formInline.tls,type:"text",sort:6},{paramKey:"smtp.recipient",paramValue:this.formInline.recipient,type:"text",sort:8}];this.$refs[e].validate((function(e){if(!e)return!1;t.result=t.$post("/system/edit/email",s,(function(e){var s=e.success;s?t.$success(t.$t("commons.save_success")):t.$message.error(t.$t("commons.save_failed"))}))}))},cancel:function(){this.showEdit=!0,this.showCancel=!1,this.showSave=!1,this.show=!0,this.query()}}},l=r,m=s("cba8"),c=Object(m["a"])(l,a,i,!1,null,"092a17b8",null),p=c.exports,u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}]},[s("el-form",{ref:"form",attrs:{model:e.form,size:"small",rules:e.rules,disabled:e.show}},[s("el-form-item",{attrs:{label:e.$t("ldap.url"),prop:"url"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_url_placeholder")},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.dn"),prop:"dn"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_dn")},model:{value:e.form.dn,callback:function(t){e.$set(e.form,"dn",t)},expression:"form.dn"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.password"),prop:"password"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_password"),"show-password":"","auto-complete":"new-password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.ou"),prop:"ou"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_ou_placeholder")},model:{value:e.form.ou,callback:function(t){e.$set(e.form,"ou",t)},expression:"form.ou"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.filter"),prop:"filter"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_filter_placeholder")},model:{value:e.form.filter,callback:function(t){e.$set(e.form,"filter",t)},expression:"form.filter"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.mapping"),prop:"mapping"}},[s("el-input",{attrs:{placeholder:e.$t("ldap.input_mapping_placeholder")},model:{value:e.form.mapping,callback:function(t){e.$set(e.form,"mapping",t)},expression:"form.mapping"}})],1),s("el-form-item",{attrs:{label:e.$t("ldap.open"),prop:"open"}},[s("el-checkbox",{model:{value:e.form.open,callback:function(t){e.$set(e.form,"open",t)},expression:"form.open"}})],1)],1),s("div",[s("el-button",{attrs:{type:"primary",size:"small",disabled:!e.show},on:{click:e.testConnection}},[e._v(e._s(e.$t("ldap.test_connect"))+" ")]),s("el-button",{attrs:{type:"primary",size:"small",disabled:!e.showLogin||!e.show},on:{click:e.testLogin}},[e._v(" "+e._s(e.$t("ldap.test_login"))+" ")]),e.showEdit?s("el-button",{attrs:{size:"small"},on:{click:e.edit}},[e._v(e._s(e.$t("ldap.edit")))]):e._e(),e.showSave?s("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.save("form")}}},[e._v(e._s(e.$t("commons.save"))+" ")]):e._e(),e.showCancel?s("el-button",{attrs:{type:"info",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("commons.cancel")))]):e._e()],1),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}],attrs:{title:e.$t("ldap.test_login"),visible:e.loginVisible,width:"30%","destroy-on-close":""},on:{"update:visible":function(t){e.loginVisible=t},close:e.close}},[s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"90px"}},[s("el-form-item",{attrs:{label:e.$t("commons.username"),prop:"username"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:e.$t("ldap.input_username")},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{label:e.$t("commons.password"),prop:"password"}},[s("el-input",{attrs:{autocomplete:"new-password",placeholder:e.$t("ldap.input_password"),"show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("ms-dialog-footer",{on:{cancel:function(t){e.loginVisible=!1},confirm:function(t){return e.login("loginForm")}}})],1)],1)],1)},d=[],h=(s("5a05"),s("15bc")),f=s("495f"),g={name:"LdapSetting",components:{MsDialogFooter:h["a"]},data:function(){return{form:{open:!1},loginForm:{},result:{},show:!0,showEdit:!0,showSave:!1,showCancel:!1,showLogin:!1,loginVisible:!1,rules:{url:{required:!0,message:this.$t("ldap.input_url"),trigger:["change","blur"]},dn:{required:!0,message:this.$t("ldap.input_dn"),trigger:["change","blur"]},password:{required:!0,message:this.$t("ldap.input_password"),trigger:["change","blur"]},ou:{required:!0,message:this.$t("ldap.input_ou"),trigger:["change","blur"]},filter:{required:!0,message:this.$t("ldap.input_filter"),trigger:["change","blur"]},mapping:{required:!0,message:this.$t("ldap.input_mapping"),trigger:["change","blur"]}},loginFormRules:{username:{required:!0,message:this.$t("ldap.input_username"),trigger:"blur"},password:{required:!0,message:this.$t("ldap.input_password"),trigger:"blur"}}}},created:function(){this.init()},methods:{init:function(){var e=this;this.result=this.$get("/system/ldap/info",(function(t){e.form=t.data,e.form.open="true"===e.form.open,e.$nextTick((function(){e.$refs.form.clearValidate()}))}))},edit:function(){this.show=!1,this.showEdit=!1,this.showSave=!0,this.showCancel=!0},cancel:function(){this.showEdit=!0,this.showCancel=!1,this.showSave=!1,this.show=!0,this.init()},close:function(){Object(f["z"])(this.close),this.loginVisible=!1},testConnection:function(){var e=this;if(!this.checkParam())return!1;this.result=this.$post("/ldap/test/connect",this.form,(function(){e.$success(e.$t("commons.connection_successful")),e.showLogin=!0}),(function(){e.showLogin=!1}))},testLogin:function(){return!!this.checkParam()&&(this.form.ou?this.form.filter?this.form.mapping?(this.loginForm={},this.loginVisible=!0,void Object(f["v"])(this.close)):(this.$warning(this.$t("ldap.mapping_cannot_be_empty")),!1):(this.$warning(this.$t("ldap.filter_cannot_be_empty")),!1):(this.$warning(this.$t("ldap.ou_cannot_be_empty")),!1))},checkParam:function(){return this.form.url?this.form.dn?!!this.form.password||(this.$warning(this.$t("ldap.password_cannot_be_empty")),!1):(this.$warning(this.$t("ldap.dn_cannot_be_empty")),!1):(this.$warning(this.$t("ldap.url_cannot_be_empty")),!1)},save:function(e){var t=this,s=[{paramKey:"ldap.url",paramValue:this.form.url,type:"text",sort:1},{paramKey:"ldap.dn",paramValue:this.form.dn,type:"text",sort:2},{paramKey:"ldap.password",paramValue:this.form.password,type:"password",sort:3},{paramKey:"ldap.ou",paramValue:this.form.ou,type:"text",sort:4},{paramKey:"ldap.filter",paramValue:this.form.filter,type:"text",sort:5},{paramKey:"ldap.mapping",paramValue:this.form.mapping,type:"text",sort:6},{paramKey:"ldap.open",paramValue:this.form.open,type:"text",sort:7}];this.$refs[e].validate((function(e){if(!e)return!1;t.result=t.$post("/system/save/ldap",s,(function(){t.show=!0,t.showEdit=!0,t.showSave=!1,t.showCancel=!1,t.showLogin=!1,t.$success(t.$t("commons.save_success")),t.init()}))}))},login:function(e){var t=this,s=localStorage.getItem("publicKey");this.$refs[e].validate((function(e){if(!e)return!1;var o={username:Object(f["y"])(t.loginForm.username,s),password:Object(f["y"])(t.loginForm.password,s)};t.result=t.$post("/ldap/test/login",o,(function(){t.$success(t.$t("ldap.login_success"))}))}))}}},_=g,b=Object(m["a"])(_,u,d,!1,null,"b4bb874e",null),w=b.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.result.loading,expression:"result.loading"}]},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formInline",staticClass:"demo-form-inline",attrs:{model:e.formInline,rules:e.rules,disabled:e.show,size:"small"}},[s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:e.$t("system_config.base.url"),prop:"url"}},[s("el-input",{attrs:{placeholder:e.$t("system_config.base.url_tip")},model:{value:e.formInline.url,callback:function(t){e.$set(e.formInline,"url",t)},expression:"formInline.url"}}),s("i",[e._v("("+e._s(e.$t("commons.examples"))+":https://rdmetersphere.fit2cloud.com)")])],1),s("el-form-item",{attrs:{label:e.$t("report.max_users"),prop:"concurrency"}},[s("el-input",{attrs:{placeholder:e.$t("report.max_users")},model:{value:e.formInline.concurrency,callback:function(t){e.$set(e.formInline,"concurrency",t)},expression:"formInline.concurrency"}})],1),s("el-form-item",{attrs:{label:e.$t("system_config.prometheus.host"),prop:"prometheusHost"}},[s("el-input",{attrs:{placeholder:e.$t("system_config.prometheus.host_tip")},model:{value:e.formInline.prometheusHost,callback:function(t){e.$set(e.formInline,"prometheusHost",t)},expression:"formInline.prometheusHost"}}),s("i",[e._v("("+e._s(e.$t("commons.examples"))+":http://ms-prometheus:9090)")])],1)],1)],1)],1),s("div",[e.showEdit?s("el-button",{attrs:{size:"small"},on:{click:e.edit}},[e._v(e._s(e.$t("commons.edit")))]):e._e(),e.showSave?s("el-button",{attrs:{type:"success",disabled:e.disabledSave,size:"small"},on:{click:function(t){return e.save("formInline")}}},[e._v(" "+e._s(e.$t("commons.save"))+" ")]):e._e(),e.showCancel?s("el-button",{attrs:{type:"info",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("commons.cancel")))]):e._e()],1)],1)},v=[],y={name:"BaseSetting",data:function(){return{formInline:{},input:"",visible:!0,result:{},showEdit:!0,showSave:!1,showCancel:!1,show:!0,disabledConnection:!1,disabledSave:!1,loading:!1,rules:{url:[{required:!0,message:this.$t("system_config.base.url_is_null"),trigger:["change","blur"]}],prometheusHost:[{required:!0,message:this.$t("system_config.prometheus.host_is_null"),trigger:["change","blur"]}]}}},created:function(){this.query()},methods:{query:function(){var e=this;this.result=this.$get("/system/base/info",(function(t){e.formInline=t.data,e.$nextTick((function(){e.$refs.formInline.clearValidate()}))}))},edit:function(){this.showEdit=!1,this.showSave=!0,this.showCancel=!0,this.show=!1},save:function(e){var t=this;this.showEdit=!0,this.showCancel=!1,this.showSave=!1,this.show=!0;var s=[{paramKey:"base.url",paramValue:this.formInline.url,type:"text",sort:1},{paramKey:"base.concurrency",paramValue:this.formInline.concurrency,type:"text",sort:2},{paramKey:"base.prometheus.host",paramValue:this.formInline.prometheusHost,type:"text",sort:1}];this.$refs[e].validate((function(e){if(!e)return!1;t.result=t.$post("/system/save/base",s,(function(e){e.success?t.$success(t.$t("commons.save_success")):t.$message.error(t.$t("commons.save_failed"))}))}))},cancel:function(){this.showEdit=!0,this.showCancel=!1,this.showSave=!1,this.show=!0,this.query()}}},I=y,x=(s("6230"),Object(m["a"])(I,$,v,!1,null,"4e6c902e",null)),k=x.exports,S=s("cfb0"),C=S.keys().length>0?S("./display/Display.vue"):{},V=S.keys().length>0?S("./auth/Auth.vue"):{},E=S.keys().length>0?S("./module/Module.vue"):{},q={name:"SystemParameterSetting",components:{BaseSetting:k,EmailSetting:p,LdapSetting:w,MsDisplay:C.default,MsAuth:V.default,MsModule:E.default},data:function(){return{activeName:"base"}},methods:{hasLicense:f["p"]}},K=q,z=Object(m["a"])(K,o,n,!1,null,"040559a6",null);t["default"]=z.exports},6230:function(e,t,s){"use strict";s("add1")},add1:function(e,t,s){}}]);