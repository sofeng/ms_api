(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a9b950f"],{"00f1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report-export"},[a("ms-report-title",{attrs:{title:t.title,type:t.type}}),t._t("default")],2)},n=[],i=a("cd3e"),o={name:"MsReportExportTemplate",components:{MsReportTitle:i["a"]},props:{title:String,type:String}},r=o,l=(a("95ad"),a("cba8")),c=Object(l["a"])(r,s,n,!1,null,"e651856c",null);e["a"]=c.exports},"0293":function(t,e,a){},"0365":function(t,e,a){"use strict";a("e941")},"0d56":function(t,e,a){},1332:function(t,e,a){"use strict";a("c6c3")},"13fb":function(t,e,a){"use strict";a("0d56")},1746:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("editor",{attrs:{lang:t.mode,theme:t.theme,height:t.height},on:{init:t.editorInit},model:{value:t.formatData,callback:function(e){t.formatData=e},expression:"formatData"}})},n=[],i=(a("51b3"),a("89a8"),a("1a91"),a("1549")),o=a("ac39"),r=a.n(o),l={name:"MsCodeEdit",components:{editor:a("50bc")},data:function(){return{formatData:""}},props:{height:[String,Number],data:{type:String},theme:{type:String,default:function(){return"chrome"}},init:{type:Function},readOnly:{type:Boolean,default:function(){return!1}},mode:{type:String,default:function(){return"text"}},modes:{type:Array,default:function(){return["text","json","xml","html"]}}},mounted:function(){this.format()},watch:{formatData:function(){this.$emit("update:data",this.formatData)},mode:function(){this.format()},data:function(){this.formatData=this.data}},methods:{editorInit:function(t){a("93c6"),this.modes.forEach((function(t){a("c1d1")("./"+t)})),a("07ed")("./"+this.theme),a("55eb"),this.readOnly&&t.setReadOnly(!0),this.init&&this.init(t)},format:function(){switch(this.mode){case"json":this.formatData=Object(i["a"])(this.data);break;case"html":this.formatData=r()(this.data);break;case"xml":this.formatData=Object(i["c"])(this.data);break;default:this.data&&(this.formatData=this.data)}}}},c=l,u=a("cba8"),d=Object(u["a"])(c,s,n,!1,null,"f181b9da",null);e["a"]=d.exports},1987:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["Prepare"==t.value?a("ms-tag",{attrs:{type:"info",content:t.$t("test_track.plan.plan_status_prepare")}}):t._e(),"Underway"==t.value?a("ms-tag",{attrs:{type:"primary",content:t.$t("test_track.plan.plan_status_running")}}):t._e(),"Finished"==t.value?a("ms-tag",{attrs:{type:"warning",content:t.$t("test_track.plan.plan_status_finished")}}):t._e(),"Completed"==t.value?a("ms-tag",{attrs:{type:"success",content:t.$t("test_track.plan.plan_status_completed")}}):t._e(),"Trash"===t.value?a("ms-tag",{attrs:{type:"danger",effect:"plain",content:t.$t("test_track.plan.plan_status_trash")}}):t._e()],1)},n=[],i=a("aa18"),o={name:"PlanStatusTableItem",components:{MsTag:i["a"]},props:{value:{type:String}}},r=o,l=a("cba8"),c=Object(l["a"])(r,s,n,!1,null,"357802a2",null);e["a"]=c.exports},"29da":function(t,e,a){},"2ad6":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return o}));var s=a("0692"),n=(s["default"].t("commons.id"),s["default"].t("commons.name"),s["default"].t("test_track.case.priority"),s["default"].t("test_track.case.status"),s["default"].t("commons.tag"),s["default"].t("test_track.case.module"),s["default"].t("commons.update_time"),s["default"].t("commons.create_user"),s["default"].t("custom_field.case_maintainer"),[{id:"name",label:s["default"].t("test_track.review.review_name")},{id:"reviewer",label:s["default"].t("test_track.review.reviewer")},{id:"projectName",label:s["default"].t("test_track.review.review_project")},{id:"creatorName",label:s["default"].t("test_track.review.review_creator")},{id:"status",label:s["default"].t("test_track.review.review_status")},{id:"createTime",label:s["default"].t("commons.create_time")},{id:"endTime",label:s["default"].t("test_track.review.end_time")},{id:"tags",label:"标签"}]),i=[{id:"name",label:s["default"].t("commons.name")},{id:"userName",label:s["default"].t("test_track.plan.plan_principal")},{id:"status",label:s["default"].t("test_track.plan.plan_status")},{id:"stage",label:s["default"].t("test_track.plan.plan_stage")},{id:"testRate",label:s["default"].t("test_track.home.test_rate")},{id:"projectName",label:s["default"].t("test_track.plan.plan_project")},{id:"plannedStartTime",label:s["default"].t("test_track.plan.planned_start_time")},{id:"plannedEndTime",label:s["default"].t("test_track.plan.planned_end_time")},{id:"actualStartTime",label:s["default"].t("test_track.plan.actual_start_time")},{id:"actualEndTime",label:s["default"].t("test_track.plan.actual_end_time")},{id:"tags",label:s["default"].t("commons.tag")},{id:"executionTimes",label:s["default"].t("commons.execution_times")},{id:"passRate",label:s["default"].t("commons.pass_rate")},{id:"createUser",label:s["default"].t("commons.create_user")}],o=(s["default"].t("api_test.definition.api_name"),s["default"].t("api_test.definition.api_type"),s["default"].t("api_test.definition.api_principal"),s["default"].t("api_test.definition.api_path"),s["default"].t("commons.tag"),s["default"].t("api_test.definition.api_last_time"),s["default"].t("api_test.definition.api_case_number"),s["default"].t("api_test.definition.api_case_status"),s["default"].t("api_test.definition.api_case_passing_rate"),s["default"].t("api_test.definition.api_status"),[{id:"num",label:s["default"].t("commons.id")},{id:"name",label:s["default"].t("commons.name")},{id:"priority",label:s["default"].t("test_track.case.priority")},{id:"type",label:s["default"].t("test_track.case.type")},{id:"nodePath",label:s["default"].t("test_track.case.module")},{id:"projectName",label:s["default"].t("test_track.review.review_project")},{id:"reviewerName",label:s["default"].t("test_track.review.reviewer")},{id:"reviewStatus",label:s["default"].t("test_track.case.status")},{id:"updateTime",label:s["default"].t("commons.update_time")},{id:"maintainer",label:s["default"].t("custom_field.case_maintainer")}]);s["default"].t("commons.id"),s["default"].t("commons.name"),s["default"].t("test_track.case.priority"),s["default"].t("test_track.case.type"),s["default"].t("commons.tag"),s["default"].t("test_track.case.module"),s["default"].t("test_track.review.review_project"),s["default"].t("test_track.issue.issue"),s["default"].t("test_track.plan_view.executor"),s["default"].t("test_track.plan_view.execute_result"),s["default"].t("commons.update_time"),s["default"].t("api_test.definition.request.responsible"),s["default"].t("commons.id"),s["default"].t("api_test.definition.api_name"),s["default"].t("test_track.case.priority"),s["default"].t("api_test.definition.api_path"),s["default"].t("api_test.definition.api_last_time"),s["default"].t("commons.tag"),s["default"].t("api_test.definition.request.responsible"),s["default"].t("commons.create_time"),s["default"].t("commons.id"),s["default"].t("commons.name"),s["default"].t("load_test.project_name"),s["default"].t("load_test.user_name"),s["default"].t("commons.create_time"),s["default"].t("commons.status"),s["default"].t("test_track.plan.load_case.execution_status"),s["default"].t("test_track.plan.load_case.report"),s["default"].t("commons.id"),s["default"].t("api_test.automation.scenario_name"),s["default"].t("api_test.automation.case_level"),s["default"].t("api_test.automation.tag"),s["default"].t("api_test.automation.creator"),s["default"].t("api_test.automation.update_time"),s["default"].t("api_test.automation.success"),s["default"].t("api_test.automation.fail"),s["default"].t("api_test.automation.passing_rate"),s["default"].t("api_test.definition.request.responsible"),s["default"].t("commons.create_time")},3586:function(t,e,a){},3644:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"edit"===t.operationType?t.$t("test_track.plan.edit_plan"):t.$t("test_track.plan.create_plan"),visible:t.dialogFormVisible,width:"65%"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.close},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" "+t._s(t.$t("test_track.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.savePlan}},[t._v(" "+t._s(t.$t("test_track.confirm"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.testPlanInfo}},[t._v(" "+t._s(t.$t("test_track.planning_execution"))+" ")])],1)]},proxy:!0}])},[t.isStepTableAlive?a("el-form",{ref:"planFrom",attrs:{model:t.form,rules:t.rules}},[a("el-row",[a("el-col",{attrs:{span:8,offset:1}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.plan_name"),"label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:t.$t("test_track.plan.input_plan_name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:t.$t("commons.tag"),"label-width":t.formLabelWidth,prop:"tag"}},[a("ms-input-tag",{ref:"tag",attrs:{currentScenario:t.form}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.plan_principal"),"label-width":t.formLabelWidth,prop:"principal"}},[a("el-select",{attrs:{placeholder:t.$t("test_track.plan.input_plan_principal"),filterable:""},model:{value:t.form.principal,callback:function(e){t.$set(t.form,"principal",e)},expression:"form.principal"}},t._l(t.principalOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name+"("+t.id+")",value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.plan_stage"),"label-width":t.formLabelWidth,prop:"stage"}},[a("el-select",{attrs:{clearable:"",placeholder:t.$t("test_track.plan.input_plan_stage")},model:{value:t.form.stage,callback:function(e){t.$set(t.form,"stage",e)},expression:"form.stage"}},[a("el-option",{attrs:{label:t.$t("test_track.plan.smoke_test"),value:"smoke"}}),a("el-option",{attrs:{label:t.$t("test_track.plan.system_test"),value:"system"}}),a("el-option",{attrs:{label:t.$t("test_track.plan.regression_test"),value:"regression"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8,offset:1}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.planned_start_time"),"label-width":t.formLabelWidth,prop:"plannedStartTime"}},[a("el-date-picker",{attrs:{placeholder:t.$t("test_track.plan.planned_start_time"),type:"datetime","value-format":"timestamp"},model:{value:t.form.plannedStartTime,callback:function(e){t.$set(t.form,"plannedStartTime",e)},expression:"form.plannedStartTime"}})],1)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.planned_end_time"),"label-width":t.formLabelWidth,prop:"plannedEndTime"}},[a("el-date-picker",{attrs:{placeholder:t.$t("test_track.plan.planned_end_time"),type:"datetime","value-format":"timestamp"},model:{value:t.form.plannedEndTime,callback:function(e){t.$set(t.form,"plannedEndTime",e)},expression:"form.plannedEndTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8,offset:1}},[a("el-form-item",{attrs:{label:t.$t("自动更新状态"),"label-width":t.formLabelWidth,prop:"automaticStatusUpdate"}},[a("el-switch",{model:{value:t.form.automaticStatusUpdate,callback:function(e){t.$set(t.form,"automaticStatusUpdate",e)},expression:"form.automaticStatusUpdate"}}),a("ms-instructions-icon",{attrs:{content:"当功能用例关联的接口或性能用例在测试计划执行后，自动更新功能用例的状态"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"left"}},[a("el-col",{attrs:{span:23,offset:1}},[a("el-form-item",{attrs:{label:t.$t("commons.description"),"label-width":t.formLabelWidth,prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},rows:2,placeholder:t.$t("commons.input_content")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),"edit"===t.operationType?a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"left"}},[a("el-col",{attrs:{span:19,offset:1}},[a("el-form-item",{attrs:{label:t.$t("test_track.plan.plan_status"),"label-width":t.formLabelWidth,prop:"status"}},[a("test-plan-status-button",{attrs:{status:t.form.status},on:{statusChange:t.statusChange}})],1)],1)],1):t._e()],1):t._e()],1)],1)},n=[],i=(a("cfe5"),a("87d5"),a("10dd"),a("304d"),a("f257"),a("b85d")),o=a("495f"),r=a("ddfe"),l=a("60e1"),c={name:"TestPlanEdit",components:{MsInstructionsIcon:l["a"],TestPlanStatusButton:i["a"],MsInputTag:r["a"]},data:function(){return{isStepTableAlive:!0,dialogFormVisible:!1,form:{name:"",projectIds:[],principal:"",stage:"",description:"",plannedStartTime:"",plannedEndTime:"",automaticStatusUpdate:!1},rules:{name:[{required:!0,message:this.$t("test_track.plan.input_plan_name"),trigger:"blur"},{max:30,message:this.$t("test_track.length_less_than")+"30",trigger:"blur"}],principal:[{required:!0,message:this.$t("test_track.plan.input_plan_principal"),trigger:"change"}],stage:[{required:!0,message:this.$t("test_track.plan.input_plan_stage"),trigger:"change"}],description:[{max:200,message:this.$t("test_track.length_less_than")+"200",trigger:"blur"}]},formLabelWidth:"100px",operationType:"",principalOptions:[]}},created:function(){this.form.stage="smoke";var t=JSON.parse(localStorage.getItem("Admin-Token"));this.form.principal=t.id},methods:{reload:function(){var t=this;this.isStepTableAlive=!1,this.$nextTick((function(){return t.isStepTableAlive=!0}))},openTestPlanEditDialog:function(t){if(this.resetForm(),this.setPrincipalOptions(),this.operationType="add",t){this.operationType="edit";var e={};Object.assign(e,t),Object.assign(this.form,e)}else this.form.tags=[];Object(o["v"])(this.close),this.dialogFormVisible=!0,this.reload()},testPlanInfo:function(){var t=this;this.$refs["planFrom"].validate((function(e){if(!e)return!1;var a={};Object.assign(a,t.form),a.name=a.name.trim(),""!==a.name?(a.workspaceId=Object(o["j"])(),t.form.tags instanceof Array&&(t.form.tags=JSON.stringify(t.form.tags)),a.tags=t.form.tags,t.$post("/test/plan/"+t.operationType,a,(function(e){t.$success(t.$t("commons.save_success")),t.dialogFormVisible=!1,t.$router.push("/track/plan/view/"+e.data)}))):t.$warning(t.$t("test_track.plan.input_plan_name"))}))},savePlan:function(){var t=this;this.$refs["planFrom"].validate((function(e){if(!e)return!1;var a={};Object.assign(a,t.form),a.name=a.name.trim(),""!==a.name?(a.workspaceId=Object(o["j"])(),t.form.tags instanceof Array&&(t.form.tags=JSON.stringify(t.form.tags)),a.tags=t.form.tags,t.$post("/test/plan/"+t.operationType,a,(function(){t.$success(t.$t("commons.save_success")),t.dialogFormVisible=!1,t.$emit("refresh")}))):t.$warning(t.$t("test_track.plan.input_plan_name"))}))},validate:function(t){return""===t.name?(this.$warning(this.$t("test_track.plan.input_plan_name")),!1):!(t.plannedStartTime>t.plannedEndTime)||(this.$warning(this.$t("commons.date.data_time_error")),!1)},setPrincipalOptions:function(){var t=this;this.$post("/user/project/member/tester/list",{projectId:Object(o["g"])()},(function(e){t.principalOptions=e.data}))},statusChange:function(t){this.form.status=t,this.$forceUpdate()},close:function(){Object(o["z"])(this.close),this.dialogFormVisible=!1},resetForm:function(){var t=this;this.$refs["planFrom"]&&this.$refs["planFrom"].validate((function(){t.$refs["planFrom"].resetFields(),t.form.name="",t.form.projectIds=[];var e=JSON.parse(localStorage.getItem("Admin-Token"));return t.form.principal=e.id,t.form.stage="smoke",t.form.description="",t.form.status=null,t.form.plannedStartTime=null,t.form.plannedEndTime=null,!0}))}}},u=c,d=(a("db84"),a("cba8")),p=Object(d["a"])(u,s,n,!1,null,"c71f400e",null);e["a"]=p.exports},"3f21":function(t,e,a){},"5a4c":function(t,e,a){},"5f11":function(t,e,a){t.exports=a.p+"img/logo-MeterSphere.041f133a.png"},"676a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ms-report-export-template",{attrs:{title:t.title,type:t.$t("report.test_plan_report")}},t._l(t.previews,(function(e,s){return a("div",{key:e.id},[a("template-component",{ref:"templateComponent",refInFor:!0,attrs:{isReportView:!0,metric:t.metric,preview:e,index:s}})],1)})),0)},n=[],i=a("00f1"),o=a("0565"),r=a("cd3e"),l={name:"MsTestCaseReportExport",components:{MsReportTitle:r["a"],TemplateComponent:o["a"],MsReportExportTemplate:i["a"]},props:["previews","title","metric"]},c=l,u=(a("a803"),a("cba8")),d=Object(u["a"])(c,s,n,!1,null,"d701df3e",null);e["a"]=d.exports},80083:function(t,e,a){"use strict";a("e989")},"81a5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"report-template-list",attrs:{title:t.$t("test_track.plan_view.select_template"),visible:t.templateVisible,width:"50%"},on:{"update:visible":function(e){t.templateVisible=e}}},[a("el-main",t._l(t.templates,(function(e){return a("testcase-template-item",{key:e.id,attrs:{template:e},on:{templateEdit:t.createTemplate,refresh:t.initData}})})),1)],1)},n=[],i=a("cf83"),o=(a("4abd"),a("495f")),r={name:"TestReportTemplateList",components:{TestcaseTemplateItem:i["a"]},data:function(){return{templateVisible:!1,templates:[],planId:""}},methods:{initData:function(){var t=this,e={queryDefault:!0};e.workspaceId=Object(o["j"])(),this.result=this.$post("/case/report/template/list",e,(function(e){t.templates=e.data}))},createTemplate:function(t){var e=this,a={};a.planId=this.planId,a.templateId=t,this.$post("/case/report/add",a,(function(t){e.$emit("openReport",a.planId,t.data),e.templateVisible=!1}))},open:function(t){this.templateVisible=!0,this.planId=t,this.initData()}}},l=r,c=(a("0365"),a("cba8")),u=Object(c["a"])(l,s,n,!1,null,"696868e1",null);e["a"]=u.exports},8988:function(t,e,a){"use strict";a("5a4c")},"8e72":function(t,e,a){"use strict";a("c1f7")},"95ad":function(t,e,a){"use strict";a("3f21")},a3e4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ms-container",[a("ms-main-container",[a("test-plan-list",{ref:"testPlanList",on:{openTestPlanEditDialog:t.openTestPlanEditDialog,testPlanEdit:t.openTestPlanEditDialog}})],1),a("test-plan-edit",{ref:"testPlanEditDialog",on:{refresh:t.refreshTestPlanList}})],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.cardResult.loading,expression:"cardResult.loading"}],staticClass:"table-card",scopedSlots:t._u([{key:"header",fn:function(){return[a("ms-table-header",{attrs:{"create-permission":["PROJECT_TRACK_PLAN:READ+CREATE"],condition:t.condition,"create-tip":t.$t("test_track.plan.create_plan")},on:{"update:condition":function(e){t.condition=e},search:t.initTableData,create:t.testPlanCreate}})]},proxy:!0}])},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],staticClass:"adjust-table",attrs:{border:"",data:t.tableData,height:t.screenHeight},on:{"filter-change":t.filter,"sort-change":t.sort,"row-click":t.intoPlan}},[t._l(t.tableLabel,(function(e,s){return["name"==e.id?a("el-table-column",{key:s,attrs:{prop:"name",label:t.$t("commons.name"),"show-overflow-tooltip":""}}):t._e(),"userName"==e.id?a("el-table-column",{key:s,attrs:{prop:"userName",label:t.$t("test_track.plan.plan_principal"),"show-overflow-tooltip":""}}):t._e(),"createUser"==e.id?a("el-table-column",{key:s,attrs:{prop:"createUser",label:t.$t("commons.create_user"),"show-overflow-tooltip":""}}):t._e(),"status"==e.id?a("el-table-column",{key:s,attrs:{prop:"status","column-key":"status",filters:t.statusFilters,label:t.$t("test_track.plan.plan_status"),"show-overflow-tooltip":"","min-width":100},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(e){e.stopPropagation(),t.clickt="stop"}}},[a("el-dropdown",{staticClass:"test-case-status",on:{command:t.statusChange}},[a("span",{staticClass:"el-dropdown-link"},[a("plan-status-table-item",{attrs:{value:e.row.status}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown",chang:""},slot:"dropdown"},[a("el-dropdown-item",{attrs:{disabled:!t.hasEditPermission,command:{item:e.row,status:"Prepare"}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_prepare"))+" ")]),a("el-dropdown-item",{attrs:{disabled:!t.hasEditPermission,command:{item:e.row,status:"Underway"}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_running"))+" ")]),a("el-dropdown-item",{attrs:{disabled:!t.hasEditPermission,command:{item:e.row,status:"Finished"}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_finished"))+" ")]),a("el-dropdown-item",{attrs:{disabled:!t.hasEditPermission,command:{item:e.row,status:"Completed"}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_completed"))+" ")])],1)],1)],1)]}}],null,!0)}):t._e(),"stage"==e.id?a("el-table-column",{key:s,attrs:{prop:"stage","column-key":"stage",filters:t.stageFilters,label:t.$t("test_track.plan.plan_stage"),"show-overflow-tooltip":"","min-width":110},scopedSlots:t._u([{key:"default",fn:function(t){return[a("plan-stage-table-item",{attrs:{stage:t.row.stage}})]}}],null,!0)}):t._e(),"testRate"==e.id?a("el-table-column",{key:s,attrs:{prop:"testRate",label:t.$t("test_track.home.test_rate"),"min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.testRate}})]}}],null,!0)}):t._e(),"projectName"==e.id?a("el-table-column",{key:s,attrs:{prop:"projectName",label:t.$t("test_track.plan.plan_project"),"show-overflow-tooltip":""}}):t._e(),"tags"==e.id?a("el-table-column",{key:s,attrs:{prop:"tags",label:t.$t("api_test.automation.tag")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(t,e){return a("ms-tag",{key:e,staticStyle:{"margin-left":"0px","margin-right":"2px"},attrs:{type:"success",effect:"plain",content:t}})}))}}],null,!0)}):t._e(),"executionTimes"==e.id?a("el-table-column",{key:s,attrs:{prop:"executionTimes",label:t.$t("commons.execution_times"),"show-overflow-tooltip":"","min-width":100}}):t._e(),"passRate"==e.id?a("el-table-column",{key:s,attrs:{prop:"passRate",label:t.$t("commons.pass_rate"),"show-overflow-tooltip":""}}):t._e(),"plannedStartTime"==e.id?a("el-table-column",{key:s,attrs:{sortable:"",prop:"plannedStartTime",label:t.$t("test_track.plan.planned_start_time"),"show-overflow-tooltip":"","min-width":110},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.plannedStartTime)))])]}}],null,!0)}):t._e(),"plannedEndTime"==e.id?a("el-table-column",{key:s,attrs:{sortable:"",prop:"plannedEndTime",label:t.$t("test_track.plan.planned_end_time"),"show-overflow-tooltip":"","min-width":110},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.plannedEndTime)))])]}}],null,!0)}):t._e(),"actualStartTime"==e.id?a("el-table-column",{key:s,attrs:{sortable:"",prop:"actualStartTime","min-width":110,label:t.$t("test_track.plan.actual_start_time"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.actualStartTime)))])]}}],null,!0)}):t._e(),"actualEndTime"==e.id?a("el-table-column",{key:s,attrs:{sortable:"","min-width":110,prop:"actualEndTime",label:t.$t("test_track.plan.actual_end_time"),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.actualEndTime)))])]}}],null,!0)}):t._e()]})),a("el-table-column",{attrs:{"min-width":"180",label:t.$t("commons.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("ms-table-operator",{attrs:{"edit-permission":["PROJECT_TRACK_PLAN:READ+EDIT"],"delete-permission":["PROJECT_TRACK_PLAN:READ+DELETE"]},on:{editClick:function(a){return t.handleEdit(e.row)},deleteClick:function(a){return t.handleDelete(e.row)}},scopedSlots:t._u([{key:"middle",fn:function(){return[e.row.reportId?t._e():a("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_TRACK_PLAN:READ+EDIT"],expression:"['PROJECT_TRACK_PLAN:READ+EDIT']"}],attrs:{tip:t.$t("test_track.plan_view.create_report"),icon:"el-icon-s-data"},on:{exec:function(a){return t.openTestReportTemplate(e.row)}}}),e.row.reportId?a("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_TRACK_PLAN:READ+EDIT"],expression:"['PROJECT_TRACK_PLAN:READ+EDIT']"}],attrs:{tip:t.$t("test_track.plan_view.view_report"),icon:"el-icon-s-data"},on:{exec:function(a){return t.openReport(e.row.id,e.row.reportId)}}}):t._e()]},proxy:!0}],null,!0)}),e.row.scheduleOpen?t._e():a("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_TRACK_PLAN:READ+SCHEDULE"],expression:"['PROJECT_TRACK_PLAN:READ+SCHEDULE']"}],staticClass:"schedule-btn",attrs:{type:"text",tip:t.$t("commons.trigger_mode.schedule"),icon:"el-icon-time"},on:{exec:function(a){return t.scheduleTask(e.row)}}}),e.row.scheduleOpen?a("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_TRACK_PLAN:READ+SCHEDULE"],expression:"['PROJECT_TRACK_PLAN:READ+SCHEDULE']"}],staticClass:"schedule-btn",attrs:{type:"text",tip:t.$t("commons.trigger_mode.schedule"),icon:"el-icon-time"},on:{exec:function(a){return t.scheduleTask(e.row)}}}):t._e()],1)]}}])},[a("template",{slot:"header"},[a("header-label-operate",{on:{exec:t.customHeader}})],1)],2)],2),a("header-custom",{ref:"headerCustom",attrs:{initTableData:t.inite,optionalFields:t.headerItems,type:t.type}}),a("ms-table-pagination",{attrs:{change:t.initTableData,"current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}}),a("test-report-template-list",{ref:"testReportTemplateList",on:{openReport:t.openReport}}),a("test-case-report-view",{ref:"testCaseReportView",on:{refresh:t.initTableData}}),a("ms-delete-confirm",{ref:"deleteConfirm",attrs:{title:t.$t("test_track.plan.plan_delete"),"with-tip":t.enableDeleteTip},on:{delete:t._handleDelete}},[t._v(" "+t._s(t.$t("test_track.plan.plan_delete_tip"))+" ")]),a("ms-test-plan-schedule-maintain",{ref:"scheduleMaintain",on:{refreshTable:t.initTableData}})],1)},o=[],r=(a("89a8"),a("1a91"),a("87d5"),a("978f")),l=a("59d9"),c=a("10b9"),u=a("15bc"),d=a("be8e"),p=a("1c98"),m=a("1987"),f=a("a690"),h=a("81a5"),_=a("c334"),b=a("a369"),g=a("8852"),v=a("e077"),w=a("4abd"),T=a("2ad6"),k=a("6191"),$=a("aa2a"),y=a("aa18"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],staticClass:"schedule-edit",attrs:{"close-on-click-modal":!1,width:"60%",visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[[a("div",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("schedule.task_config"),name:"first"}},[a("div",{staticClass:"el-step__icon is-text",staticStyle:{"margin-right":"10px"}},[a("div",{staticClass:"el-step__icon-inner"},[t._v("1")])]),a("span",[t._v(t._s(t.$t("schedule.edit_timer_task")))]),a("el-form",{ref:"from",staticStyle:{"padding-top":"10px","margin-left":"20px"},attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{prop:"cronValue"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-input",{staticClass:"inp",attrs:{disabled:t.isReadOnly,placeholder:t.$t("schedule.please_input_cron_expression")},model:{value:t.form.cronValue,callback:function(e){t.$set(t.form,"cronValue",e)},expression:"form.cronValue"}}),a("el-button",{attrs:{disabled:t.isReadOnly,type:"primary"},on:{click:t.saveCron}},[t._v(t._s(t.$t("commons.save"))+" ")])],1),a("el-col",{attrs:{span:6}},[a("schedule-switch",{attrs:{schedule:t.schedule,"corn-value":t.form.cronValue},on:{resultListChange:t.getExecuteTimeTemplate,scheduleChange:t.scheduleChange}})],1)],1)],1),a("el-form-item",[a("el-link",{attrs:{disabled:t.isReadOnly,type:"primary"},on:{click:t.showCronDialog}},[t._v(" "+t._s(t.$t("schedule.generate_expression"))+" ")])],1),a("crontab-result",{ref:"crontabResult",attrs:{ex:t.form.cronValue}})],1),a("div",{staticClass:"el-step__icon is-text",staticStyle:{"margin-right":"10px"}},[a("div",{staticClass:"el-step__icon-inner"},[t._v("2")])]),a("span",[t._v(t._s(t.$t("load_test.runtime_config")))]),a("div",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"ms-mode-span"},[t._v(t._s(t.$t("run_mode.title"))+"：")]),a("el-radio-group",{model:{value:t.runConfig.mode,callback:function(e){t.$set(t.runConfig,"mode",e)},expression:"runConfig.mode"}},[a("el-radio",{attrs:{label:"serial"}},[t._v(t._s(t.$t("run_mode.serial")))]),a("el-radio",{attrs:{label:"parallel"}},[t._v(t._s(t.$t("run_mode.parallel")))])],1)],1),"serial"===t.runConfig.mode?a("div",{staticClass:"ms-mode-div"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"ms-mode-span"},[t._v(t._s(t.$t("run_mode.other_config"))+":")])]),a("el-col",{attrs:{span:18}},[a("div",[a("el-checkbox",{model:{value:t.runConfig.onSampleError,callback:function(e){t.$set(t.runConfig,"onSampleError",e)},expression:"runConfig.onSampleError"}},[t._v("失败停止")])],1),"TEST_PLAN_TEST"===t.scheduleTaskType?a("div",{staticStyle:{"padding-top":"10px"}},[a("el-checkbox",{staticStyle:{"padding-right":"10px"},model:{value:t.runConfig.runWithinResourcePool,callback:function(e){t.$set(t.runConfig,"runWithinResourcePool",e)},expression:"runConfig.runWithinResourcePool"}},[t._v(" "+t._s(t.$t("run_mode.run_with_resource_pool"))+" ")]),a("el-select",{attrs:{disabled:!t.runConfig.runWithinResourcePool,size:"mini"},model:{value:t.runConfig.resourcePoolId,callback:function(e){t.$set(t.runConfig,"resourcePoolId",e)},expression:"runConfig.resourcePoolId"}},t._l(t.resourcePools,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,disabled:!t.api,value:t.id}})})),1)],1):t._e()])],1)],1):t._e(),"parallel"===t.runConfig.mode?a("div",{staticClass:"ms-mode-div"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"ms-mode-span"},[t._v(t._s(t.$t("run_mode.other_config"))+":")])]),a("el-col",{attrs:{span:18}},["TEST_PLAN_TEST"===t.scheduleTaskType?a("div",{staticStyle:{"padding-top":"10px"}},[a("el-checkbox",{staticStyle:{"padding-right":"10px"},model:{value:t.runConfig.runWithinResourcePool,callback:function(e){t.$set(t.runConfig,"runWithinResourcePool",e)},expression:"runConfig.runWithinResourcePool"}},[t._v(" "+t._s(t.$t("run_mode.run_with_resource_pool"))+" ")]),a("el-select",{attrs:{disabled:!t.runConfig.runWithinResourcePool,size:"mini"},model:{value:t.runConfig.resourcePoolId,callback:function(e){t.$set(t.runConfig,"resourcePoolId",e)},expression:"runConfig.resourcePoolId"}},t._l(t.resourcePools,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,disabled:!t.api,value:t.id}})})),1)],1):t._e()])],1)],1):t._e(),a("el-dialog",{attrs:{width:"60%",title:t.$t("schedule.generate_expression"),visible:t.showCron,modal:!1},on:{"update:visible":function(e){t.showCron=e}}},[a("crontab",{ref:"crontab",attrs:{expression:t.schedule.value},on:{hide:function(e){t.showCron=!1},fill:t.crontabFill}})],1)],1),a("el-tab-pane",{attrs:{label:t.$t("schedule.task_notification"),name:"second"}},[a("ms-schedule-notification",{attrs:{"test-id":t.testId,"schedule-receiver-options":t.scheduleReceiverOptions}})],1)],1)],1)]],2)},S=[],E=(a("fe35"),a("8fec"),a("495f")),x=a("1cff"),R=a("ab53"),P=a("a215"),O=a("d7b3"),I=a("fbbb");function D(){return{pass:!0}}var j=a("cfb0"),N=j.keys().length>0?j("./notice/NoticeTemplate.vue"):{},A={name:"MsTestPlanScheduleMaintain",components:{CrontabResult:R["a"],ScheduleSwitch:I["a"],Crontab:x["a"],MsScheduleNotification:O["a"],NoticeTemplate:N.default},props:{customValidate:{type:Function,default:D},isReadOnly:{type:Boolean,default:!1}},watch:{"schedule.value":function(){this.form.cronValue=this.schedule.value}},data:function(){var t=this,e=function(e,a,s){var n=t.customValidate(t.getIntervalTime());a?Object(P["a"])(a)?n.pass?s():s(new Error(n.info)):s(new Error(t.$t("schedule.cron_expression_format_error"))):s(new Error(t.$t("commons.input_content")))};return{result:{},scheduleReceiverOptions:[],operation:!0,dialogVisible:!1,schedule:{value:""},scheduleTaskType:"",testId:String,showCron:!1,form:{cronValue:""},paramRow:{},activeName:"first",rules:{cronValue:[{required:!0,validator:e,trigger:"blur"}]},resourcePools:[],runConfig:{mode:"serial",reportType:"iddReport",onSampleError:!1,runWithinResourcePool:!1,resourcePoolId:null}}},methods:{currentUser:function(){return Object(E["h"])()},scheduleChange:function(){var t=this,e=this.schedule.enable,a={};a.taskID=this.schedule.id,a.enable=e;var s=this;!1===e?this.$confirm(this.$t("api_test.home_page.running_task_list.confirm.close_title"),this.$t("commons.prompt"),{confirmButtonText:this.$t("commons.confirm"),cancelButtonText:this.$t("commons.cancel"),type:"warning",beforeClose:function(t,e,n){"cancel"===t&&(s.schedule.enable=a.enable=!0),n()}}).then((function(){t.updateTask(a)})).catch((function(){})):this.updateTask(a)},updateTask:function(t){var e=this;this.result=this.$post("/api/schedule/updateEnableByPrimyKey",t,(function(t){var a="";"testPlan"===e.paramRow.redirectFrom?(a=e.paramRow.id,e.scheduleTaskType="TEST_PLAN_TEST"):(a=e.paramRow.id,e.scheduleTaskType="API_SCENARIO_TEST"),e.taskID=a,e.findSchedule(a)}))},initUserList:function(){var t=this,e={name:"",organizationId:Object(E["f"])()};this.result=this.$post("user/org/member/list/all",e,(function(e){t.scheduleReceiverOptions=e.data}))},buildParam:function(){var t={};return t.notices=this.tableData,t.testId=this.testId,t},open:function(t){var e="";this.paramRow=t,"testPlan"===t.redirectFrom?(e=t.id,this.scheduleTaskType="TEST_PLAN_TEST"):(e=t.id,this.scheduleTaskType="API_SCENARIO_TEST"),this.testId=e,this.findSchedule(e),this.initUserList(),this.dialogVisible=!0,this.form.cronValue=this.schedule.value,Object(E["v"])(this.close),this.activeName="first",this.getResourcePools()},findSchedule:function(){var t=this,e=this.testId,a=this.scheduleTaskType;this.result=this.$get("/schedule/findOne/"+e+"/"+a,(function(e){null!=e.data?(t.schedule=e.data,e.data.config&&(t.runConfig=JSON.parse(e.data.config))):t.schedule={}}))},crontabFill:function(t,e){this.form.cronValue=t,this.$refs.crontabResult.resultList=e,this.$refs["from"].validate()},showCronDialog:function(){this.showCron=!0},saveCron:function(){var t=this;this.$refs["from"].validate((function(e){if(!e)return!1;t.intervalShortValidate();var a=t.form.cronValue;t.schedule.enable=!0,t.schedule.value=a,t.saveSchedule(),t.dialogVisible=!1}))},saveSchedule:function(){var t=this;this.checkScheduleEdit();var e={};e=this.schedule,e.resourceId=this.testId,e.projectId||(e.projectId=Object(E["g"])()),e.workspaceId||(e.workspaceId=Object(E["j"])()),e.config=JSON.stringify(this.runConfig);var a="/api/automation/schedule/create";"TEST_PLAN_TEST"===this.scheduleTaskType?(e.scheduleFrom="testPlan",a="/schedule/create",e.id&&(a="/schedule/update")):(e.scheduleFrom="scenario",e.id&&(a="/api/automation/schedule/update")),this.$post(a,e,(function(){t.$success(t.$t("commons.save_success")),t.$emit("refreshTable")}))},checkScheduleEdit:function(){return!this.create||(this.$message(this.$t("api_test.environment.please_save_test")),!1)},saveNotice:function(){var t=this,e=this.buildParam();this.result=this.$post("notice/save",e,(function(){t.$success(t.$t("commons.save_success"))}))},close:function(){this.dialogVisible=!1,this.form.cronValue="",this.$refs["from"].resetFields(),this.schedule.value||(this.$refs.crontabResult.resultList=[]),Object(E["z"])(this.close)},intervalShortValidate:function(){return this.getIntervalTime()<18e4&&this.$info(this.$t("schedule.cron_expression_interval_short_error")),!0},resultListChange:function(){this.$refs["from"].validate()},getIntervalTime:function(){var t=this.$refs.crontabResult.resultList,e=new Date(t[0]),a=new Date(t[1]);return a-e},getExecuteTimeTemplate:function(t){alert(t)},getResourcePools:function(){var t=this;this.result=this.$get("/testresourcepool/list/quota/valid",(function(e){t.resourcePools=e.data}))}},computed:{isTesterPermission:function(){return!0}}},L=A,F=(a("b00e"),a("cba8")),z=Object(F["a"])(L,C,S,!1,null,"011242ea",null),M=z.exports,V={name:"TestPlanList",components:{MsTag:y["a"],HeaderLabelOperate:$["a"],HeaderCustom:k["a"],MsDeleteConfirm:b["a"],TestCaseReportView:_["a"],TestReportTemplateList:h["a"],PlanStageTableItem:f["a"],PlanStatusTableItem:m["a"],MsTestPlanScheduleMaintain:M,MsTableOperator:p["a"],MsTableOperatorButton:d["a"],MsDialogFooter:u["a"],MsTableHeader:c["a"],MsCreateBox:r["a"],MsTablePagination:l["a"]},data:function(){return{createUser:"",type:w["J"],headerItems:T["c"],tableHeaderKey:"TEST_PLAN_LIST",tableLabel:[],result:{},cardResult:{},enableDeleteTip:!1,queryPath:"/test/plan/list",deletePath:"/test/plan/delete",condition:{components:g["i"]},currentPage:1,pageSize:10,hasEditPermission:!1,total:0,tableData:[],screenHeight:"calc(100vh - 200px)",statusFilters:[{text:this.$t("test_track.plan.plan_status_prepare"),value:"Prepare"},{text:this.$t("test_track.plan.plan_status_running"),value:"Underway"},{text:this.$t("test_track.plan.plan_status_finished"),value:"Finished"},{text:this.$t("test_track.plan.plan_status_completed"),value:"Completed"}],stageFilters:[{text:this.$t("test_track.plan.smoke_test"),value:"smoke"},{text:this.$t("test_track.plan.system_test"),value:"system"},{text:this.$t("test_track.plan.regression_test"),value:"regression"}]}},watch:{$route:function(t,e){t.path.indexOf("/track/plan/all")>=0&&this.initTableData()}},created:function(){this.projectId=this.$route.params.projectId,this.projectId||(this.projectId=Object(E["g"])()),this.hasEditPermission=Object(E["q"])("PROJECT_TRACK_PLAN:READ+EDIT");var t=this.getSortField();t&&(this.condition.orders=t),this.initTableData()},methods:{inite:function(){this.initTableData()},customHeader:function(){var t=Object(v["i"])(this.tableLabel);this.$refs.headerCustom.open(t)},initTableData:function(){var t=this;this.planId&&(this.condition.planId=this.planId),this.selectNodeIds&&this.selectNodeIds.length>0&&(this.condition.nodeIds=this.selectNodeIds),this.projectId&&(this.condition.projectId=Object(E["g"])(),this.cardResult=this.$post(this.buildPagePath(this.queryPath),this.condition,(function(e){var a=e.data;t.total=a.itemCount,t.tableData=a.listObject,t.tableData.forEach((function(t){t.tags&&t.tags.length>0&&(t.tags=JSON.parse(t.tags)),t.passRate=t.passRate+"%"}))})),Object(v["q"])(this,w["J"]))},copyData:function(t){return JSON.parse(JSON.stringify(this.dataMap.get(t)))},buildPagePath:function(t){return t+"/"+this.currentPage+"/"+this.pageSize},testPlanCreate:function(){this.projectId?this.$emit("openTestPlanEditDialog"):this.$warning(this.$t("commons.check_project_tip"))},handleEdit:function(t){this.$emit("testPlanEdit",t)},statusChange:function(t){var e=this;if(Object(E["q"])("PROJECT_TRACK_PLAN:READ+EDIT")){var a=t.item.status,s=t.status,n={};n.id=t.item.id,n.status=s,this.$post("/test/plan/edit",n,(function(){for(var t=0;t<e.tableData.length;t++)if(e.tableData[t].id==n.id){"Completed"!==a&&"Completed"===s?e.tableData[t].actualEndTime=Date.now():"Underway"!==a&&"Underway"===s?(e.tableData[t].actualStartTime=Date.now(),e.tableData[t].actualEndTime=""):"Prepare"!==a&&"Prepare"===s&&(e.tableData[t].actualStartTime=e.tableData[t].actualEndTime=""),e.tableData[t].status=s;break}}))}},handleDelete:function(t){this.enableDeleteTip="Underway"===t.status,this.$refs.deleteConfirm.open(t)},_handleDelete:function(t){var e=this,a=t.id;this.$post("/test/plan/delete/"+a,{},(function(){e.initTableData(),e.$success(e.$t("commons.delete_success"))}))},intoPlan:function(t,e,a){this.$router.push("/track/plan/view/"+t.id)},filter:function(t){Object(v["a"])(t,this.condition),this.initTableData()},sort:function(t){this.condition.orders&&(this.condition.orders=[]),Object(v["d"])(t,this.condition),this.saveSortField(this.tableHeaderKey,this.condition.orders),this.initTableData()},openTestReportTemplate:function(t){this.$refs.testReportTemplateList.open(t.id)},openReport:function(t,e){e&&this.$refs.testCaseReportView.open(t,e)},scheduleTask:function(t){t.redirectFrom="testPlan",this.$refs.scheduleMaintain.open(t)},saveSortField:function(t,e){Object(v["z"])(t,JSON.stringify(e))},getSortField:function(){var t=Object(v["r"])(this.tableHeaderKey),e=null;if(t)try{e=JSON.parse(t)}catch(a){return null}return e}}},U=V,J=(a("13fb"),Object(F["a"])(U,i,o,!1,null,"14623c9e",null)),B=J.exports,K=a("3644"),W=a("1b11"),H=a("489a"),q={name:"TestPlan",components:{MsMainContainer:H["a"],MsContainer:W["a"],TestPlanList:B,TestPlanEdit:K["a"]},data:function(){return{}},computed:{projectId:function(){return Object(E["g"])()}},mounted:function(){this.$route.path.indexOf("/track/plan/create")>=0&&(this.openTestPlanEditDialog(),this.$router.push("/track/plan/all"))},watch:{$route:function(t,e){if(t.path.indexOf("/track/plan/create")>=0){if(!this.projectId)return void this.$warning(this.$t("commons.check_project_tip"));this.openTestPlanEditDialog(),this.$router.push("/track/plan/all")}}},methods:{openTestPlanEditDialog:function(t){this.$refs.testPlanEditDialog.openTestPlanEditDialog(t)},refreshTestPlanList:function(){this.$refs.testPlanList.condition={},this.$refs.testPlanList.initTableData()}}},G=q,X=Object(F["a"])(G,s,n,!1,null,"1b455890",null);e["default"]=X.exports},a439:function(t,e,a){},a690:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["smoke"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.smoke_test")))]):t._e(),"functional"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.functional_test")))]):t._e(),"integration"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.integration_testing")))]):t._e(),"system"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.system_test")))]):t._e(),"regression"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.regression_test")))]):t._e(),"version"==t.stage?a("span",[t._v(t._s(t.$t("test_track.plan.version_validation")))]):t._e()])},n=[],i={name:"PlanStageTableItem",components:{},props:{stage:{type:String}}},o=i,r=a("cba8"),l=Object(r["a"])(o,s,n,!1,null,"139b0c60",null);e["a"]=l.exports},a803:function(t,e,a){"use strict";a("0293")},aa08:function(t,e,a){"use strict";var s=a("88d4"),n=a("ce5b"),i=a("e544"),o=a("8e74"),r=a("3ffc"),l=a("e38b"),c=n("".indexOf);s({target:"String",proto:!0,forced:!l("includes")},{includes:function(t){return!!~c(r(o(this)),r(i(t)),arguments.length>1?arguments[1]:void 0)}})},b00e:function(t,e,a){"use strict";a("29da")},b85d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"status-button",attrs:{type:"flex",justify:"start",gutter:20}},[a("el-col",[a("el-button",{attrs:{type:"info",round:"",size:"mini",icon:"Prepare"==t.status?"el-icon-check":""},on:{click:function(e){return t.setStatus("Prepare")}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_prepare")))])],1),a("el-col",[a("el-button",{attrs:{type:"primary",round:"",size:"mini",icon:"Underway"==t.status?"el-icon-check":""},on:{click:function(e){return t.setStatus("Underway")}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_running")))])],1),a("el-col",[a("el-button",{attrs:{type:"success",round:"",size:"mini",icon:"Completed"==t.status?"el-icon-check":""},on:{click:function(e){return t.setStatus("Completed")}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_completed")))])],1),a("el-col",[a("el-button",{attrs:{type:"warning",round:"",size:"mini",icon:"Finished"==t.status?"el-icon-check":""},on:{click:function(e){return t.setStatus("Finished")}}},[t._v(" "+t._s(t.$t("test_track.plan.plan_status_finished")))])],1)],1)},n=[],i={name:"TestPlanStatusButton",props:{status:{type:String}},methods:{setStatus:function(t){this.$emit("statusChange",t)}}},o=i,r=(a("debb"),a("cba8")),l=Object(r["a"])(o,s,n,!1,null,"49f70368",null);e["a"]=l.exports},c1f7:function(t,e,a){},c334:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],ref:"drawer",attrs:{visible:t.showDialog,"with-header":!1,"modal-append-to-body":!1,size:"100%"},on:{"update:visible":function(e){t.showDialog=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"head-bar",attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"name-edit"},[a("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-back"},on:{click:t.handleClose}},[t._v(t._s(t.$t("test_track.return"))+" ")]),t._v("  "),a("span",{staticClass:"title"},[t._v(t._s(t.report.name))])],1)]),a("el-col",{staticClass:"head-right",attrs:{span:12}},[a("el-button",{attrs:{disabled:!t.isTestManagerOrTestUser,plain:"",size:"mini"},on:{click:t.handleSave}},[t._v(" "+t._s(t.$t("commons.save"))+" ")]),a("el-button",{attrs:{disabled:!t.isTestManagerOrTestUser,plain:"",size:"mini"},on:{click:t.handleEdit}},[t._v(" "+t._s(t.$t("test_track.plan_view.edit_component"))+" ")]),a("el-button",{attrs:{disabled:!t.isTestManagerOrTestUser,plain:"",size:"mini"},on:{click:function(e){return t.handleExport(t.report.name)}}},[t._v(" "+t._s(t.$t("test_track.plan_view.export_report"))+" ")])],1)],1),a("div",{ref:"resume",staticClass:"container",attrs:{id:"app"}},[a("el-main",t._l(t.previews,(function(e,s){return a("div",{key:e.id},[a("template-component",{ref:"templateComponent",refInFor:!0,attrs:{isReportView:!0,metric:t.metric,preview:e,index:s}})],1)})),0)],1)]}}])}),t.reportExportVisible?a("ms-test-case-report-export",{attrs:{id:"testCaseReportExport",title:t.report.name,metric:t.metric,previews:t.previews}}):t._e(),a("test-case-report-template-edit",{ref:"templateEdit",attrs:{metric:t.metric},on:{refresh:t.getReport}})],1)},n=[],i=(a("bb13"),a("89a8"),a("b110"),a("fe35"),a("1a91"),a("d5ee"),a("10dd"),a("87d5"),a("495f")),o=a("b826"),r=a("6147"),l=a("4b7c"),c=a("ce2d"),u=a("8501"),d=a("0565"),p=a("156b"),m=a.n(p),f=a("676a"),h={name:"TestCaseReportView",components:{MsTestCaseReportExport:f["a"],TemplateComponent:d["a"],TestCaseReportTemplateEdit:u["a"],RichTextComponent:c["a"],TestResultComponent:l["a"],TestResultChartComponent:r["a"],BaseInfoComponent:o["a"]},data:function(){return{result:{},imgUrl:"",showDialog:!1,previews:[],report:{},reportId:"",metric:{},planId:"",reportExportVisible:!1,componentMap:new Map([[1,{name:this.$t("test_track.plan_view.base_info"),id:1,type:"system"}],[2,{name:this.$t("test_track.plan_view.test_result"),id:2,type:"system"}],[3,{name:this.$t("test_track.plan_view.result_distribution"),id:3,type:"system"}],[4,{name:this.$t("test_track.plan_view.failure_case"),id:4,type:"system"}],[5,{name:this.$t("test_track.plan_view.defect_list"),id:5,type:"system"}],[6,{name:this.$t("test_track.plan_view.custom_component"),id:6,type:"custom"}]]),isTestManagerOrTestUser:!1}},mounted:function(){this.isTestManagerOrTestUser=!0},methods:{listenGoBack:function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))},goBack:function(){this.handleClose()},open:function(t,e){this.planId=t,e&&(this.reportId=e),this.getReport(),this.showDialog=!0,this.listenGoBack()},getReport:function(){var t=this;this.result=this.$get("/case/report/get/"+this.reportId,(function(e){t.report=e.data,t.report.content=JSON.parse(e.data.content),t.report.content.customComponent&&(t.report.content.customComponent=Object(i["u"])(t.report.content.customComponent)),t.getMetric(),t.initPreviews()}))},initPreviews:function(){var t=this;this.previews=[],this.report.content.components.forEach((function(e){var a=t.componentMap.get(e);if(a&&"custom"!=a.type)t.previews.push(a);else if(t.report.content.customComponent){var s=t.report.content.customComponent.get(e.toString());s&&t.previews.push({id:e,title:s.title,content:s.content})}}))},handleClose:function(){window.removeEventListener("popstate",this.goBack,!1),this.$emit("refresh"),this.showDialog=!1},handleEdit:function(){this.$refs.templateEdit.open(this.reportId,!0)},handleSave:function(){var t=this,e={};this.buildParam(e),this.$get("/test/plan/report/saveTestPlanReport/"+this.planId+"/MANUAL",(function(){t.result=t.$post("/case/report/edit",e,(function(){t.$success(t.$t("commons.save_success"))}))}))},buildParam:function(t){var e=this,a={components:[]};this.previews.forEach((function(t){a.components.push(t.id),e.componentMap.get(t.id)||(a.customComponent=new Map,a.customComponent.set(t.id,{title:t.title,content:t.content}))})),t.name=this.report.name,a.customComponent&&(a.customComponent=Object(i["w"])(a.customComponent)),t.content=JSON.stringify(a),t.id=this.report.id,this.metric.startTime&&(t.startTime=this.metric.startTime.getTime()),this.metric.endTime&&(t.endTime=this.metric.endTime.getTime())},getMetric:function(){var t=this;this.result=this.$get("/test/plan/get/metric/"+this.planId,(function(e){t.metric=e.data,t.metric.failureTestCases||(t.metric.failureTestCases=[]),t.metric.executeResult||(t.metric.executeResult=[]),t.metric.moduleExecuteResult||(t.metric.moduleExecuteResult=[]),t.metric.issues||(t.metric.issues=[]),t.report.startTime&&(t.metric.startTime=new Date(t.report.startTime)),t.report.endTime&&(t.metric.endTime=new Date(t.report.endTime))}))},handleExport:function(t){this.result.loading=!0,this.reportExportVisible=!0;var e=this.exportReportReset;this.$nextTick((function(){setTimeout((function(){m()(document.getElementById("testCaseReportExport"),{scale:2}).then((function(a){Object(i["d"])(t,[a]),e()}))}),1e3)}))},exportReportReset:function(){this.reportExportVisible=!1,this.result.loading=!1}}},_=h,b=(a("80083"),a("cba8")),g=Object(b["a"])(_,s,n,!1,null,"3aea9e0f",null);e["a"]=g.exports},c6c3:function(t,e,a){},cd3e:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix report-title"},[a("div",{staticClass:"report-left"},[a("div",{staticClass:"title"},[t._v(" 【"+t._s(t.type)+"】- "+t._s(t.title)+" ")]),a("div",[a("span",{staticClass:"time"},[t._v(t._s(t._f("timestampFormatDate")(new Date)))])])]),t._m(0)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report-right"},[s("img",{staticClass:"logo",attrs:{src:a("5f11")}})])}],i={name:"MsReportTitle",props:{title:String,type:String},data:function(){return{}}},o=i,r=(a("defb"),a("cba8")),l=Object(r["a"])(o,s,n,!1,null,"41c9b43d",null);e["a"]=l.exports},d7b3:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",size:"mini"},on:{click:t.handleAddTaskModel}},[t._v(" "+t._s(t.$t("organization.message.create_new_notification"))+" ")]),a("el-popover",{attrs:{placement:"right-end",title:"示例",width:"400",trigger:"click"}},[a("ms-code-edit",{attrs:{"read-only":!0,height:"400px",data:t.title,modes:t.modes,mode:"html"},on:{"update:data":function(e){t.title=e}}}),a("el-button",{attrs:{slot:"reference",icon:"el-icon-warning",plain:"",size:"mini"},slot:"reference"},[t._v(" "+t._s(t.$t("organization.message.mail_template_example"))+" ")])],1),a("el-popover",{attrs:{placement:"right-end",title:"示例",width:"400",trigger:"click"}},[a("ms-code-edit",{attrs:{"read-only":!0,height:"200px",data:t.robotTitle,modes:t.modes,mode:"text"},on:{"update:data":function(e){t.robotTitle=e}}}),a("el-button",{attrs:{slot:"reference",icon:"el-icon-warning",plain:"",size:"mini"},slot:"reference"},[t._v(" "+t._s(t.$t("organization.message.robot_template"))+" ")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tb-edit",attrs:{data:t.scheduleTask,border:"","cell-style":t.rowClass,"header-cell-style":t.headClass}},[a("el-table-column",{attrs:{label:t.$t("schedule.event"),prop:"events","min-width":"13%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"mini",placeholder:t.$t("organization.message.select_events"),prop:"events",disabled:!e.row.isSet},model:{value:e.row.event,callback:function(a){t.$set(e.row,"event",a)},expression:"scope.row.event"}},t._l(t.scheduleEventOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:t.$t("schedule.receiver"),prop:"userIds","min-width":"18%"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",size:"mini",placeholder:t.$t("commons.please_select"),disabled:!s.isSet},model:{value:s.userIds,callback:function(e){t.$set(s,"userIds",e)},expression:"row.userIds"}},t._l(t.scheduleReceiverOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)]}}])}),a("el-table-column",{attrs:{label:t.$t("schedule.receiving_mode"),prop:"type","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:t.$t("organization.message.select_receiving_method"),size:"mini",disabled:!e.row.isSet},on:{change:function(a){return t.handleEdit(e.$index,e.row)}},model:{value:e.row.type,callback:function(a){t.$set(e.row,"type",a)},expression:"scope.row.type"}},t._l(t.receiveTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"webhook","min-width":"20%",prop:"webhook"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"webhook地址",size:"mini",disabled:!e.row.isSet||!e.row.isReadOnly},model:{value:e.row.webhook,callback:function(a){t.$set(e.row,"webhook",a)},expression:"scope.row.webhook"}})]}}])}),a("el-table-column",{attrs:{label:t.$t("commons.operating"),prop:"result","min-width":"25%"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSet?a("el-button",{directives:[{name:"xpack",rawName:"v-xpack"}],attrs:{type:"success",size:"mini"},on:{click:function(a){return t.handleTemplate(e.$index,e.row)}}},[t._v(t._s(t.$t("organization.message.template"))+" ")]):t._e(),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.isSet,expression:"scope.row.isSet"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleAddTask(e.$index,e.row)}}},[t._v(t._s(t.$t("commons.add"))+" ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.isSet,expression:"scope.row.isSet"}],attrs:{size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.removeRowTask(e.$index,t.scheduleTask)}}},[t._v(t._s(t.$t("commons.cancel"))+" ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.row.isSet,expression:"!scope.row.isSet"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleEditTask(e.$index,e.row)}}},[t._v(t._s(t.$t("commons.edit"))+" ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.row.isSet,expression:"!scope.row.isSet"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRowTask(e.$index,e.row)}}})]}}])})],1)],1)],1),a("notice-template",{directives:[{name:"xpack",rawName:"v-xpack"}],ref:"noticeTemplate"})],1)},n=[],i=(a("89a8"),a("fe35"),a("993f"),a("495f")),o=a("1746"),r=a("cfb0"),l=r.keys().length>0?r("./notice/NoticeTemplate.vue"):{},c={name:"ScheduleNotification",components:{MsCodeEdit:o["a"],NoticeTemplate:l.default},props:{testId:String,scheduleReceiverOptions:Array,isTesterPermission:{type:Boolean,default:!0}},data:function(){return{modes:["text","html"],title:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>MeterSphere</title>\n</head>\n<body>\n<div>\n    <div style="text-align: left">\n        <p>尊敬的用户：</p>\n        <p style="margin-left: 60px">您好:\n    </div>\n    <div style="margin-left: 100px">\n        <p>${testName} 接口测试运行失败<br/>\n        <p>执行人:${executor}</p>        <p>负责人:${principal}</p>        <p>执行环境:${executionEnvironment}</p>        <p>执行时间:${executionTime}</p>            请点击下面链接进入测试报告页面</p>\n        <a href="${url}/#/${type}/report/view/${id}">${url}/#/${type}/report/view/${id}</a>\n        <p>新版接口测试报告路径</p>\n        <a href="${url}/#/api/automation/report/view/">${url}/#/api/automation/report/view/${id}</a>\n    </div>\n\n</div>\n</body>\n</html>',robotTitle:"测试【任务通知】:'${testName} ${type}测试运行${status}\n执行人:${executor}\n负责人:${principal}\n测试环境为:${executionEnvironment}\n执行时间：${executionTime}\n请点击下面链接进入测试报告页面\n${url}/#/${type}/report/view/${id}新版接口测试报告路径\n${url}/#/api/automation/report/view/${id}",scheduleTask:[{taskType:"scheduleTask",event:"",userIds:[],type:[],webhook:"",isSet:!0,identification:"",isReadOnly:!1,testId:this.testId}],scheduleEventOptions:[{value:"EXECUTE_SUCCESSFUL",label:this.$t("schedule.event_success")},{value:"EXECUTE_FAILED",label:this.$t("schedule.event_failed")}],receiveTypeOptions:[{value:"EMAIL",label:this.$t("organization.message.mail")},{value:"NAIL_ROBOT",label:this.$t("organization.message.nail_robot")},{value:"WECHAT_ROBOT",label:this.$t("organization.message.enterprise_wechat_robot")},{value:"LARK",label:this.$t("organization.message.lark")}]}},mounted:function(){this.initForm()},activated:function(){this.initForm()},watch:{testId:function(){this.initForm()}},methods:{initForm:function(){var t=this;this.result=this.$get("/notice/search/message/"+this.testId,(function(e){t.scheduleTask=e.data}))},handleEdit:function(t,e){e.isReadOnly=!0,"EMAIL"===e.type&&(e.isReadOnly=!e.isReadOnly,e.webhook="")},handleAddTaskModel:function(){var t={event:[],userIds:[],type:"",webhook:"",isSet:!0,identification:"",taskType:"SCHEDULE_TASK"};t.testId=this.testId,this.scheduleTask.push(t)},handleEditTask:function(t,e){e.isSet=!0,e.testId=this.testId,"EMAIL"===e.type?(e.isReadOnly=!1,e.webhook=""):e.isReadOnly=!0},handleAddTask:function(t,e){e.event&&e.userIds.length>0&&e.type?"NAIL_ROBOT"===e.type||"WECHAT_ROBOT"===e.type||"LARK"===e.type?e.webhook?this.addTask(e):this.$warning(this.$t("organization.message.message_webhook")):this.addTask(e):this.$warning(this.$t("organization.message.message"))},addTask:function(t){var e=this;this.result=this.$post("/notice/save/message/task",t,(function(){e.initForm(),e.$success(e.$t("commons.save_success"))}))},removeRowTask:function(t,e){e[t].identification?e[t].isSet=!1:e.splice(t,1)},deleteRowTask:function(t,e){var a=this;this.result=this.$get("/notice/delete/message/"+e.identification,(function(t){a.$success(a.$t("commons.delete_success")),a.initForm()}))},rowClass:function(){return"text-align:center"},headClass:function(){return"text-align:center;background:'#ededed'"},handleTemplate:function(t,e){Object(i["p"])()&&this.$refs.noticeTemplate.open(e)}}},u=c,d=(a("8988"),a("cba8")),p=Object(d["a"])(u,s,n,!1,null,"0e58fd2b",null);e["a"]=p.exports},db84:function(t,e,a){"use strict";a("a439")},dd13:function(t,e,a){},ddfe:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-input-tag input-tag-wrapper",class:[t.size?"el-input-tag--"+t.size:""],staticStyle:{height:"auto"},on:{click:t.foucusTagInput}},[t._l(t.innerTags,(function(e,s){return a("el-tag",t._b({key:e,staticClass:"ms-top",attrs:{type:"info",size:t.size,closable:!t.readOnly,"disable-transitions":!1},on:{close:function(e){return t.remove(s)}}},"el-tag",t.$attrs,!1),[t._v(" "+t._s(e&&e.length>10?e.substring(0,10)+"...":e)+" ")])})),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag,expression:"newTag"}],staticClass:"tag-input el-input",attrs:{disabled:t.readOnly,placeholder:t.$t("commons.tag_tip")},domProps:{value:t.newTag},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.stopPropagation(),t.removeLastTag.apply(null,arguments))},t.addNew],blur:t.addNew,input:function(e){e.target.composing||(t.newTag=e.target.value)}}})],2)},n=[],i=a("045d"),o=(a("2788"),a("aa08"),a("89a8"),a("1a91"),a("4c1e"),a("fee8"),a("cfe5"),a("993f"),{name:"MsInputTag",props:{currentScenario:{},addTagOnKeys:{type:Array,default:function(){return[13,188,9]}},readOnly:{type:Boolean,default:!1},size:{type:String,default:"small"}},created:function(){this.currentScenario.tags||(this.currentScenario.tags=[])},data:function(){return{newTag:"",innerTags:this.currentScenario.tags?Object(i["a"])(this.currentScenario.tags):[]}},watch:{innerTags:function(){this.currentScenario.tags=this.innerTags}},methods:{foucusTagInput:function(){this.readOnly||!this.$el.querySelector(".tag-input")?console.log():this.$el.querySelector(".tag-input").focus()},addNew:function(t){var e=this;if(!t||this.addTagOnKeys.includes(t.keyCode)||"blur"===t.type){t&&(t.stopPropagation(),t.preventDefault());var a=!1;this.newTag.includes(",")?this.newTag.split(",").forEach((function(t){e.addTag(t.trim())&&(a=!0)})):this.addTag(this.newTag.trim())&&(a=!0),a&&(this.tagChange(),this.newTag="")}},addTag:function(t){return t=t.trim(),!(!t||this.innerTags.includes(t))&&(this.innerTags.push(t),!0)},remove:function(t){this.innerTags.splice(t,1),this.tagChange()},removeLastTag:function(){this.newTag||(this.innerTags.pop(),this.tagChange())},tagChange:function(){this.$emit("input",this.innerTags)}}}),r=o,l=(a("8e72"),a("cba8")),c=Object(l["a"])(r,s,n,!1,null,"1ab1373a",null);e["a"]=c.exports},debb:function(t,e,a){"use strict";a("3586")},defb:function(t,e,a){"use strict";a("dd13")},e941:function(t,e,a){},e989:function(t,e,a){},fbbb:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule-config"},[a("div",[t._m(0),a("el-switch",{attrs:{disabled:!t.schedule.value},on:{change:t.scheduleChange},model:{value:t.schedule.enable,callback:function(e){t.$set(t.schedule,"enable",e)},expression:"schedule.enable"}})],1),a("div",[a("span",[t._v(" "+t._s(t.$t("schedule.next_execution_time"))+"： "),t.schedule.enable?t._e():a("span",{class:{"disable-character":!t.schedule.enable}},[t._v(t._s(t.$t("schedule.not_set")))]),t.schedule.enable?a("crontab-result",{ref:"crontabResult",attrs:{"enable-simple-mode":!0,ex:t.cornValue}}):t._e()],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"cron-ico"},[a("i",{staticClass:"el-icon-date",attrs:{size:"small"}}),a("span",{staticClass:"character"},[t._v("SCHEDULER")])])}],i=a("ab53"),o={name:"ScheduleSwitch",components:{CrontabResult:i["a"]},data:function(){return{}},props:{testId:String,schedule:Object,cornValue:String,isReadOnly:{type:Boolean,default:!1}},methods:{scheduleChange:function(){this.$emit("scheduleChange")}},watch:{}},r=o,l=(a("1332"),a("cba8")),c=Object(l["a"])(r,s,n,!1,null,"d2824070",null);e["a"]=c.exports}}]);