(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c3a199a"],{"1fea":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ms-container",[s("ms-main-container",[s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.result.loading,expression:"result.loading"}],staticClass:"table-card",scopedSlots:t._u([{key:"header",fn:function(){return[s("ms-table-header",{attrs:{condition:t.condition,"show-create":!1},on:{"update:condition":function(e){t.condition=e},search:t.search}})]},proxy:!0}])},[s("el-table",{ref:"reportListTable",staticClass:"adjust-table table-content",attrs:{border:"",data:t.tableData,height:t.screenHeight},on:{"sort-change":t.sort,"select-all":t.handleSelectAll,select:t.handleSelect,"filter-change":t.filter,"row-click":t.handleView}},[s("el-table-column",{attrs:{type:"selection"}}),s("el-table-column",{attrs:{width:"40",resizable:!1,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("show-more-btn",{attrs:{"is-show":e.row.showMore,buttons:t.buttons,size:t.selectDataCounts}})]}}])},[s("el-dropdown",{staticStyle:{width:"14px"},attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"el-dropdown-link",staticStyle:{width:"14px"}},[s("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-left":"0px"}})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(e){return e.stopPropagation(),t.isSelectDataAll(!0)}}},[t._v(" "+t._s(t.$t("api_test.batch_menus.select_all_data",[t.total]))+" ")]),s("el-dropdown-item",{nativeOn:{click:function(e){return e.stopPropagation(),t.isSelectDataAll(!1)}}},[t._v(" "+t._s(t.$t("api_test.batch_menus.select_show_data",[t.tableData.length]))+" ")])],1)],1)],1),s("el-table-column",{attrs:{label:t.$t("commons.name"),width:"200","show-overflow-tooltip":"",prop:"name"}}),s("el-table-column",{attrs:{prop:"scenarioName",label:t.$t("api_test.automation.scenario_name"),width:"150","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"userName",label:t.$t("api_test.creator"),width:"150","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"createTime",width:"250",label:t.$t("commons.create_time"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("timestampFormatDate")(e.row.createTime)))])]}}])}),s("el-table-column",{attrs:{prop:"triggerMode",width:"150",label:t.$t("commons.trigger_mode.name"),"column-key":"triggerMode",filters:t.triggerFilters},scopedSlots:t._u([{key:"default",fn:function(t){return[s("report-trigger-mode-item",{attrs:{"trigger-mode":t.row.triggerMode}})]}}])}),s("el-table-column",{attrs:{prop:"status",label:t.$t("commons.status"),"column-key":"status",filters:t.statusFilters},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[s("ms-api-report-status",{attrs:{row:e}})]}}])}),s("el-table-column",{attrs:{width:"150",label:t.$t("commons.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("ms-table-operator-button",{attrs:{tip:t.$t("api_report.detail"),icon:"el-icon-s-data",type:"primary"},on:{exec:function(s){return t.handleView(e.row)}}}),s("ms-table-operator-button",{directives:[{name:"permission",rawName:"v-permission",value:["PROJECT_API_REPORT:READ+DELETE"],expression:"['PROJECT_API_REPORT:READ+DELETE']"}],attrs:{tip:t.$t("api_report.delete"),icon:"el-icon-delete",type:"danger"},on:{exec:function(s){return t.handleDelete(e.row)}}})],1)]}}])})],1),s("ms-table-pagination",{attrs:{change:t.search,"current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1)],1)},o=[],a=(s("89a8"),s("d25d"),s("b110"),s("fe35"),s("8ea3"),s("10dd"),s("4c1e"),s("6df5"),s("1a91"),s("e766"),s("5a05"),s("59d9")),i=s("10b9"),r=s("1b11"),l=s("489a"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["Starting"===t.row.status?s("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(" "+t._s(t.row.status)+" ")]):"Running"===t.row.status?s("el-tag",{attrs:{size:"mini",type:"primary",effect:"plain"}},[t._v(" "+t._s(t.row.status)+" ")]):"Success"===t.row.status?s("el-tag",{attrs:{size:"mini",type:"success"}},[t._v(" "+t._s(t.row.status)+" ")]):"Reporting"===t.row.status?s("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v(" "+t._s(t.row.status)+" ")]):"Error"===t.row.status?s("el-tooltip",{attrs:{placement:"top",effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",[t._v(t._s(t.row.description))])]},proxy:!0}])},[s("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(" "+t._s(t.row.status)+" ")])],1):s("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(" "+t._s(t.row.status)+" ")])],1)},u=[],d={name:"MsApiReportStatus",props:{row:Object}},p=d,h=s("cba8"),m=Object(h["a"])(p,c,u,!1,null,"2e06a9a4",null),f=m.exports,g=s("495f"),_=s("be8e"),b=s("4191"),w=s("8852"),v=s("eab7"),S=s("e077"),$={components:{ReportTriggerModeItem:b["a"],MsTableOperatorButton:_["a"],MsApiReportStatus:f,MsMainContainer:l["a"],MsContainer:r["a"],MsTableHeader:i["a"],MsTablePagination:a["a"],ShowMoreBtn:v["a"]},data:function(){return{result:{},reportId:"",debugVisible:!1,condition:{components:w["f"]},tableData:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,loading:!1,currentProjectId:"",statusFilters:[{text:"Saved",value:"Saved"},{text:"Starting",value:"Starting"},{text:"Running",value:"Running"},{text:"Reporting",value:"Reporting"},{text:"Completed",value:"Completed"},{text:"Error",value:"Error"},{text:"Success",value:"Success"}],triggerFilters:[{text:this.$t("commons.trigger_mode.manual"),value:"MANUAL"},{text:this.$t("commons.trigger_mode.schedule"),value:"SCHEDULE"},{text:this.$t("commons.trigger_mode.api"),value:"API"},{text:this.$t("api_test.automation.batch_execute"),value:"BATCH"}],buttons:[{name:this.$t("api_report.batch_delete"),handleClick:this.handleBatchDelete,permissions:["PROJECT_API_REPORT:READ+DELETE"]}],selectRows:new Set,selectAll:!1,unSelection:[],selectDataCounts:0,screenHeight:"calc(100vh - 200px)"}},watch:{$route:"init"},methods:{search:function(){var t=this;"all"!==this.testId&&(this.condition.testId=this.testId),this.condition.projectId=Object(g["g"])(),this.selectAll=!1,this.unSelection=[],this.selectDataCounts=0;var e="/api/scenario/report/list/"+this.currentPage+"/"+this.pageSize;this.result=this.$post(e,this.condition,(function(e){var s=e.data;t.total=s.itemCount,t.tableData=s.listObject,t.selectRows.clear(),t.unSelection=s.listObject.map((function(t){return t.id}))}))},handleSelectionChange:function(t){this.multipleSelection=t},handleView:function(t){this.reportId=t.id,"Running"!==t.status?(this.currentProjectId=t.projectId,this.$router.push({path:"report/view/"+t.id})):this.$warning("正在运行中，请稍后查看")},handleDelete:function(t){var e=this;this.$alert(this.$t("api_report.delete_confirm")+t.name+"？","",{confirmButtonText:this.$t("commons.confirm"),callback:function(s){"confirm"===s&&(e.result=e.$post("/api/scenario/report/delete",{id:t.id},(function(){e.$success(e.$t("commons.delete_success")),e.search()})))}})},init:function(){this.testId=this.$route.params.testId,this.search()},sort:function(t){Object(S["d"])(t,this.condition),this.init()},filter:function(t){Object(S["a"])(t,this.condition),this.init()},handleSelect:function(t,e){this.selectRows.has(e)?(this.$set(e,"showMore",!1),this.selectRows.delete(e)):(this.$set(e,"showMore",!0),this.selectRows.add(e)),this.selectRowsCount(this.selectRows)},handleSelectAll:function(t){var e=this;t.length>0?this.tableData.forEach((function(t){e.$set(t,"showMore",!0),e.selectRows.add(t)})):(this.selectRows.clear(),this.tableData.forEach((function(t){e.$set(t,"showMore",!1)}))),this.selectRowsCount(this.selectRows)},handleBatchDelete:function(){var t=this;this.$alert(this.$t("api_report.delete_batch_confirm")+"？","",{confirmButtonText:this.$t("commons.confirm"),callback:function(e){if("confirm"===e){var s=Array.from(t.selectRows).map((function(t){return t.id})),n={};n.ids=s,n.selectAllDate=t.isSelectAllDate,n.unSelectIds=t.unSelection,n=Object.assign(n,t.condition),t.$post("/api/scenario/report/batch/delete",n,(function(){t.selectRows.clear(),t.$success(t.$t("commons.delete_success")),t.search()}))}}})},selectRowsCount:function(t){var e=this.getIds(t),s=this.tableData.map((function(t){return t.id}));this.unSelection=s.filter((function(t){return-1===e.indexOf(t)})),this.isSelectAllDate?this.selectDataCounts=this.total-this.unSelection.length:this.selectDataCounts=t.size},isSelectDataAll:function(t){this.isSelectAllDate=t,this.selectRowsCount(this.selectRows),this.selectRows.size!=this.tableData.length&&this.$refs.reportListTable.toggleAllSelection(!0)},getIds:function(t){var e=Array.from(t),s=e.map((function(t){return t.id}));return s}},created:function(){this.init()}},R=$,x=(s("ee62"),Object(h["a"])(R,n,o,!1,null,"caa8b958",null));e["default"]=x.exports},"344e":function(t,e,s){},4191:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",["TEST_PLAN_API"===t.triggerMode?s("span",[t._v(t._s(t.$t("commons.trigger_mode.api")))]):t._e(),"MANUAL"===t.triggerMode?s("span",[t._v(t._s(t.$t("commons.trigger_mode.manual")))]):t._e(),"SCHEDULE"===t.triggerMode?s("span",[t._v(t._s(t.$t("commons.trigger_mode.schedule")))]):t._e(),"TEST_PLAN_SCHEDULE"===t.triggerMode?s("span",[t._v(t._s(t.$t("commons.trigger_mode.schedule")))]):t._e(),"API"===t.triggerMode?s("span",[t._v(t._s(t.$t("commons.trigger_mode.api")))]):t._e(),"BATCH"===t.triggerMode?s("span",[t._v(t._s(t.$t("api_test.automation.batch_execute")))]):t._e()])},o=[],a={name:"ReportTriggerModeItem",props:["triggerMode"]},i=a,r=s("cba8"),l=Object(r["a"])(i,n,o,!1,null,"43af7f24",null);e["a"]=l.exports},"66e9":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"6df5":function(t,e,s){"use strict";var n=s("e3f7"),o=s("9dd2"),a=s("25ef"),i=s("8e74"),r=s("66e9"),l=s("3ffc"),c=s("ecf4"),u=s("bacb");o("search",(function(t,e,s){return[function(e){var s=i(this),o=void 0==e?void 0:c(e,t);return o?n(o,e,s):new RegExp(e)[t](l(s))},function(t){var n=a(this),o=l(t),i=s(e,n,o);if(i.done)return i.value;var c=n.lastIndex;r(c,0)||(n.lastIndex=0);var d=u(n,o);return r(n.lastIndex,c)||(n.lastIndex=c),null===d?-1:d.index}]}))},afcf:function(t,e,s){"use strict";s("b553")},b553:function(t,e,s){},c3e6:function(t,e,s){},ddf4:function(t,e,s){"use strict";s("344e")},eab7:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isShow?s("div",[s("el-dropdown",{attrs:{placement:"bottom",trigger:"click",size:"medium"}},[s("div",{staticClass:"show-more-btn",on:{click:function(t){t.stopPropagation()}}},[s("el-tooltip",{attrs:{"popper-class":"batch-popper",value:!t.hasShowed,effect:"dark",content:t.$t("test_track.case.batch_operate"),placement:"top-start"}},[s("i",{staticClass:"el-icon-more ms-icon-more table-more-icon"})])],1),s("el-dropdown-menu",{staticClass:"dropdown-menu-class",attrs:{slot:"dropdown"},slot:"dropdown"},[s("div",{staticClass:"show-more-btn-title"},[t._v(t._s(t.$t("test_track.case.batch_handle",[t.size])))]),t._l(t.buttons,(function(e,n){return s("el-dropdown-item",{key:n,attrs:{disabled:t.isDisable(e)},nativeOn:{click:function(s){return s.stopPropagation(),t.click(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)],1):t._e()},o=[],a=s("045d"),i=(s("51b3"),s("993f"),s("495f")),r={name:"ShowMoreBtn",data:function(){return{disabled:!1}},props:{isShow:{type:Boolean,default:!1},buttons:Array,row:Object,size:Number,hasShowed:Boolean},created:function(){this.trashEnable&&this.buttons.splice(1,1)},methods:{click:function(t){t.handleClick instanceof Function&&t.handleClick()},isDisable:function(t){return!!(t.permissions&&t.permissions.length>0)&&!i["r"].apply(void 0,Object(a["a"])(t.permissions))}}},l=r,c=(s("afcf"),s("ddf4"),s("cba8")),u=Object(c["a"])(l,n,o,!1,null,"0c4d25dc",null);e["a"]=u.exports},ee62:function(t,e,s){"use strict";s("c3e6")}}]);